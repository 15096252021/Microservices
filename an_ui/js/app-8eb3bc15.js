import{e,r as t,f as n,g as o,h as r,i,j as a,k as l,o as u,c as s,l as c,w as d,F as h,m as f,n as v,q as p,s as g,t as m,v as y,x as w,y as b,z as _,A as x,B as k,b as E,C as N,D as S,E as M,G as C,H as $,I as P,J as z,K as A,L as O,M as B,N as I,O as T,P as D,Q as V,R,S as X,T as H,U as Y,d as L,V as F,W as j,X as q,p as U,a as Z,_ as K}from"./app-870de38e.js";var W;const G=typeof window<"u",Q=e=>typeof e<"u",J=e=>"function"==typeof e,ee=e=>"number"==typeof e,te=e=>"string"==typeof e,ne=()=>{};function oe(e){return"function"==typeof e?e():v(e)}G&&null!=(W=null==window?void 0:window.navigator)&&W.userAgent&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const re=e=>e();function ie(e,t=!1,n="Timeout"){return new Promise(((o,r)=>{setTimeout(t?()=>r(n):o,e)}))}function ae(e,n){let o,r,i;const a=t(!0),l=()=>{a.value=!0,i()};g(e,l,{flush:"sync"});const u=J(n)?n:n.get,s=J(n)?void 0:n.set,c=T(((e,t)=>(r=e,i=t,{get:()=>(a.value&&(o=u(),a.value=!1),r(),o),set(e){null==s||s(e)}})));return Object.isExtensible(c)&&(c.trigger=l),c}function le(e){return!!M()&&(b(e),!0)}function ue(){const e=[],t=t=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)};return{on:n=>{e.push(n);const o=()=>t(n);return le(o),{off:o}},off:t,trigger:t=>{e.forEach((e=>e(t)))}}}function se(e,t=!1){function n(n,{flush:o="sync",deep:r=!1,timeout:i,throwOnTimeout:a}={}){let l=null;const u=[new Promise((i=>{l=g(e,(e=>{n(e)!==t&&(null==l||l(),i(e))}),{flush:o,deep:r,immediate:!0})}))];return null!=i&&u.push(ie(i,a).then((()=>oe(e))).finally((()=>null==l?void 0:l()))),Promise.race(u)}function o(o,r){if(!H(o))return n((e=>e===o),r);const{flush:i="sync",deep:a=!1,timeout:l,throwOnTimeout:u}=r??{};let s=null;const c=[new Promise((n=>{s=g([e,o],(([e,o])=>{t!==(e===o)&&(null==s||s(),n(e))}),{flush:i,deep:a,immediate:!0})}))];return null!=l&&c.push(ie(l,u).then((()=>oe(e))).finally((()=>(null==s||s(),oe(e))))),Promise.race(c)}function r(e){return i(1,e)}function i(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}return Array.isArray(oe(e))?{toMatch:n,toContains:function(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(oe(e))}),t)},changed:r,changedTimes:i,get not(){return se(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:function(e){return n((e=>Boolean(e)),e)},toBeNull:function(e){return o(null,e)},toBeNaN:function(e){return n(Number.isNaN,e)},toBeUndefined:function(e){return o(void 0,e)},changed:r,changedTimes:i,get not(){return se(e,!t)}}}function ce(e){return se(e)}var de=Object.getOwnPropertySymbols,he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,ve=(e,t)=>{var n={};for(var o in e)he.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&de)for(var o of de(e))t.indexOf(o)<0&&fe.call(e,o)&&(n[o]=e[o]);return n};function pe(e,t,n={}){const o=n,{eventFilter:r=re}=o,i=ve(o,["eventFilter"]);return g(e,function(e,t){return function(...n){return new Promise(((o,r)=>{Promise.resolve(e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})).then(o).catch(r)}))}}(r,t),i)}var ge=Object.defineProperty,me=Object.defineProperties,ye=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,xe=(e,t,n)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ke=(e,t)=>{for(var n in t||(t={}))be.call(t,n)&&xe(e,n,t[n]);if(we)for(var n of we(t))_e.call(t,n)&&xe(e,n,t[n]);return e},Ee=(e,t)=>me(e,ye(t)),Ne=(e,t)=>{var n={};for(var o in e)be.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&we)for(var o of we(e))t.indexOf(o)<0&&_e.call(e,o)&&(n[o]=e[o]);return n};function Se(e,n,o={}){const r=o,{eventFilter:i}=r,a=Ne(r,["eventFilter"]),{eventFilter:l,pause:u,resume:s,isActive:c}=function(e=re){const n=t(!0);return{isActive:B(n),pause:function(){n.value=!1},resume:function(){n.value=!0},eventFilter:(...t)=>{n.value&&e(...t)}}}(i);return{stop:pe(e,n,Ee(ke({},a),{eventFilter:l})),pause:u,resume:s,isActive:c}}function Me(e){var t;const n=oe(e);return null!=(t=null==n?void 0:n.$el)?t:n}const Ce=G?window:void 0;function $e(...e){let t,n,o,r;if(te(e[0])||Array.isArray(e[0])?([n,o,r]=e,t=Ce):[t,n,o,r]=e,!t)return ne;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach((e=>e())),i.length=0},l=g((()=>[Me(t),oe(r)]),(([e,t])=>{a(),e&&i.push(...n.flatMap((n=>o.map((o=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,n,o,t))))))}),{immediate:!0,flush:"post"}),u=()=>{l(),a()};return le(u),u}const Pe=e=>"function"==typeof e?e:"string"==typeof e?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function ze(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=Ce,eventName:i="keydown",passive:a=!1}=o,l=Pe(t);return $e(r,i,(e=>{l(e)&&n(e)}),a)}function Ae(e,n=!1){const o=t(),r=()=>o.value=Boolean(e());return r(),function(e,t=!0){C()?a(e):t?e():z(e)}(r,n),o}const Oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Be="__vueuse_ssr_handlers__";Oe[Be]=Oe[Be]||{},Oe[Be];var Ie,Te,De=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Xe=(e,t)=>{var n={};for(var o in e)Ve.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&De)for(var o of De(e))t.indexOf(o)<0&&Re.call(e,o)&&(n[o]=e[o]);return n};(Te=Ie||(Ie={})).UP="UP",Te.RIGHT="RIGHT",Te.DOWN="DOWN",Te.LEFT="LEFT",Te.NONE="NONE";var He=Object.defineProperty,Ye=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,je=(e,t,n)=>t in e?He(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;function qe(e,n,r,i={}){var a,l,u;const{clone:s=!1,passive:c=!1,eventName:d,deep:h=!1,defaultValue:f}=i,v=C(),p=r||(null==v?void 0:v.emit)||(null==(a=null==v?void 0:v.$emit)?void 0:a.bind(v))||(null==(u=null==(l=null==v?void 0:v.proxy)?void 0:l.$emit)?void 0:u.bind(null==v?void 0:v.proxy));let m=d;n||(n="modelValue"),m=d||m||`update:${n.toString()}`;const y=e=>s?J(s)?s(e):function(e){return JSON.parse(JSON.stringify(e))}(e):e,w=()=>Q(e[n])?y(e[n]):f;if(c){const o=w(),r=t(o);return g((()=>e[n]),(e=>r.value=y(e))),g(r,(t=>{(t!==e[n]||h)&&p(m,t)}),{deep:h}),r}return o({get:()=>w(),set(e){p(m,e)}})}((e,t)=>{for(var n in t||(t={}))Le.call(t,n)&&je(e,n,t[n]);if(Ye)for(var n of Ye(t))Fe.call(t,n)&&je(e,n,t[n])})({linear:function(e){return e}},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const Ue=["production","prod"];let Ze=class extends Error{constructor(e,t){super(`[Vue Flow]: ${t?`${t} - `:""}${e}`)}};function Ke(e,...t){Ue.includes("production")}const We=()=>typeof window<"u"?window:{chrome:!1},Ge=e=>({...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0});function Qe(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}const Je=e=>({width:e.offsetWidth,height:e.offsetHeight}),et=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tt=(e,t)=>({x:et(e.x,t[0][0],t[1][0]),y:et(e.y,t[0][1],t[1][1])});function nt(e){const t=e.getRootNode(),n=We();return"elementFromPoint"in t?t:n.document}const ot=e=>e&&"id"in e&&"source"in e&&"target"in e,rt=e=>ot(e)&&"sourceNode"in e&&"targetNode"in e,it=e=>e&&"id"in e&&!ot(e),at=e=>it(e)&&"computedPosition"in e,lt=e=>!!(e.width&&e.height&&e.x&&e.y);function ut(e,t){const n=_t(e.events)?e.events:null!=t&&t.events&&_t(null==t?void 0:t.events)?null==t?void 0:t.events:{},o=_t(e.data)?e.data:null!=t&&t.data&&_t(null==t?void 0:t.data)?null==t?void 0:t.data:{};return t=rt(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||(null==t?void 0:t.sourceHandle),targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||(null==t?void 0:t.targetHandle),type:e.type??(null==t?void 0:t.type)??"default",source:e.source.toString()||(null==t?void 0:t.source),target:e.target.toString()||(null==t?void 0:t.target),updatable:e.updatable??(null==t?void 0:t.updatable),selectable:e.selectable??(null==t?void 0:t.selectable),focusable:e.focusable??(null==t?void 0:t.focusable),data:o,events:Y(n),label:(e.label&&!te(e.label)?Y(e.label):e.label)||(null==t?void 0:t.label),interactionWidth:e.interactionWidth||(null==t?void 0:t.interactionWidth)},Object.assign({id:e.id.toString()},e,t)}const st=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`vueflow__edge-${e}${t??""}-${n}${o??""}`,ct=(e,t)=>t.some((t=>ot(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)));function dt({x:e,y:t},{x:n,y:o,zoom:r},i,[a,l]){const u={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(u.x/a),y:l*Math.round(u.y/l)}:u}const ht=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),ft=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),vt=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t});function pt(e){const t=e.reduce(((e,{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0}}={})=>ht(e,ft({...t,...n}))),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return vt(t)}function gt(e,t,{x:n,y:o,zoom:r}={x:0,y:0,zoom:1},i=!1,a=!1){const l={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r};return e.filter((e=>{const{computedPosition:t={x:0,y:0},dimensions:n={width:0,height:0},selectable:o}=e;if(a&&!o)return!1;const r={...t,width:n.width||0,height:n.height||0},u=Qe(l,r),s=typeof n.width>"u"||typeof n.height>"u"||0===n.width||0===n.height,c=i&&u>0,d=n.width*n.height;return s||c||u>=d}))}function mt(e,t){const n=e.map((e=>e.id));return t.filter((e=>n.includes(e.source)||n.includes(e.target)))}function yt(e,t,n,o,r,i=.1,a={x:0,y:0}){const l=t/(e.width*(1+i)),u=n/(e.height*(1+i)),s=Math.min(l,u),c=et(s,o,r),d=e.x+e.width/2,h=e.y+e.height/2;return{x:t/2-d*c+(a.x??0),y:n/2-h*c+(a.y??0),zoom:c}}function wt(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||wt(n,t))}function bt(e,t){return typeof e>"u"?"":"string"==typeof e?e:`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}const _t=e=>typeof v(e)<"u";function xt(e,t,n){const o={},r=e.map((e=>{const n=function(e,t){let n=t;return at(e)||(n={type:e.type??"default",dimensions:Y({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:Y({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:_t(e.data)?e.data:{},events:Y(_t(e.events)?e.events:{})}),{...n,...e,id:e.id.toString()}}(e,{...t(e.id),parentNode:e.parentNode});return e.parentNode&&(o[e.parentNode]=!0),n}));return r.forEach((e=>{const t=[...r,...n].find((t=>t.id===e.parentNode));e.parentNode&&!t&&Ke(e.parentNode),(e.parentNode||o[e.id])&&(o[e.id]&&(e.isParent=!0),t&&(t.isParent=!0))})),r}var kt=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(kt||{}),Et=(e=>(e.Partial="partial",e.Full="full",e))(Et||{}),Nt=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Nt||{}),St=(e=>(e.Strict="strict",e.Loose="loose",e))(St||{}),Mt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Mt||{}),Ct=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Ct||{});const $t=Symbol("vueFlow"),Pt=Symbol("nodeId"),zt=Symbol("nodeRef"),At=Symbol("edgeId"),Ot=Symbol("edgeRef"),Bt=Symbol("slots");const It=e=>"clientX"in e;function Tt(e,t){var n,o;const r=It(e),i=r?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,a=r?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:i-((null==t?void 0:t.left)??0),y:a-((null==t?void 0:t.top)??0)}}function Dt(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Vt(e,t,n,o){return(t[n]||[]).reduce(((t,r)=>{var i,a;return`${e.id}-${r.id}-${n}`!==o&&t.push({id:r.id||null,type:n,nodeId:e.id,x:((null==(i=e.computedPosition)?void 0:i.x)??0)+r.x+r.width/2,y:((null==(a=e.computedPosition)?void 0:a.y)??0)+r.y+r.height/2}),t}),[])}function Rt(e,t,n,o,r,i,a,l,u,s){const c="target"===i,d=l.querySelector(`.vue-flow__handle[data-id="${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`),{x:h,y:f}=Tt(e),v=l.elementFromPoint(h,f),p=null!=v&&v.classList.contains("vue-flow__handle")?v:d,g={handleId:null,handleDomNode:p,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null}};if(p&&d&&t){const e=d.getAttribute("data-nodeid"),i=d.getAttribute("data-handleid"),l={source:c?t.nodeId:o,sourceHandle:c?i:r,target:c?o:t.nodeId,targetHandle:c?r:i};g.connection=l,g.handleId=i,(p.classList.contains("connectable")&&n===St.Strict?c&&"source"===t.type||!c&&"target"===t.type:e!==o||i!==r)&&(g.isValid=a(l,{edges:u,sourceNode:s(l.source),targetNode:s(l.target)}))}return g}function Xt(e,t,n){return e<t?et(Math.abs(e-t),1,50)/50:e>n?-et(Math.abs(e-n),1,50)/50:0}function Ht(e,t){return[20*Xt(e.x,35,t.width-35),20*Xt(e.y,35,t.height-35)]}const Yt=()=>!0;function Lt({handleId:e,nodeId:t,type:n,isValidConnection:r,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const u=o((()=>"target"===v(n))),s=o((()=>v(t))),c=o((()=>v(e))),d=o((()=>v(i))),{vueFlowRef:h,connectionMode:f,connectionRadius:p,connectOnClick:g,connectionClickStartHandle:m,nodesConnectable:y,autoPanOnConnect:w,findNode:b,panBy:_,getNodes:x,startConnection:k,updateConnection:E,endConnection:N,emits:S,viewport:M,edges:C,isValidConnection:$}=fl();let P=null,z=!1,A=null;return{handlePointerDown:function(e){var t;const n=It(e);if(n&&0===e.button||!n){let n=function(e){X=Tt(e,V),y=function(e,t,n){let o=null,r=1/0;return n.forEach((n=>{const i=Math.sqrt((n.x-e.x)**2+(n.y-e.y)**2);i<=t&&i<r&&(r=i,o=n)})),o}(dt(X,M.value,!1,[1,1]),p.value,Y),H||(L(),H=!0);const t=Rt(e,y,f.value,s.value,c.value,u.value?"target":"source",m,i,C.value,b);if(P=t.connection,z=t.isValid,A=t.handleDomNode,E(y&&z?function({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}({x:y.x,y:y.y},M.value):X,t,function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!y,z)),!y&&!z&&!A)return Dt(R);P&&P.source!==P.target&&A&&(Dt(R),R=A,A.classList.add("connecting","vue-flow__handle-connecting"),A.classList.toggle("valid",z),A.classList.toggle("vue-flow__handle-valid",z))},o=function(e){(y||A)&&P&&z&&(a?a(e,P):S.connect(P)),S.connectEnd(e),d.value&&(null==l||l(e)),Dt(R),cancelAnimationFrame(O),N(e),H=!1,z=!1,P=null,A=null,i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",o),i.removeEventListener("touchmove",n),i.removeEventListener("touchend",o)};const i=nt(e.target),g=b(v(s.value));let m=r||$.value||Yt;m||g&&(m=(u.value?g.isValidSourcePos:g.isValidTargetPos)||Yt);let y,O=0;const{x:B,y:I}=Tt(e),T=null==i?void 0:i.elementFromPoint(B,I),D=function(e,t){return e||(null!=t&&t.classList.contains("target")?"target":null!=t&&t.classList.contains("source")?"source":null)}(v(d.value),T),V=null==(t=h.value)?void 0:t.getBoundingClientRect();if(!V||!D)return;let R,X=Tt(e,V),H=!1;const Y=function({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce(((e,r)=>{const{handleBounds:i}=r;let a=[],l=[];return i&&(a=Vt(r,i,"source",`${t}-${n}-${o}`),l=Vt(r,i,"target",`${t}-${n}-${o}`)),e.push(...a,...l),e}),[])}({nodes:x.value,nodeId:s.value,handleId:c.value,handleType:D}),L=()=>{if(!w)return;const[e,t]=Ht(X,V);_({x:e,y:t}),O=requestAnimationFrame(L)};k({nodeId:v(s.value),handleId:v(c.value),type:v(D)},{x:B-V.left,y:I-V.top},e),S.connectStart({event:e,nodeId:s.value,handleId:c.value,handleType:D}),i.addEventListener("mousemove",n),i.addEventListener("mouseup",o),i.addEventListener("touchmove",n),i.addEventListener("touchend",o)}},handleClick:e=>{if(g.value)if(m.value){let t=r||$.value||Yt;const o=b(v(s.value));if(t||o&&(t=(u.value?o.isValidSourcePos:o.isValidTargetPos)||Yt),o&&!1===(typeof o.connectable>"u"?y:o.connectable))return;const i=nt(e.target),{connection:a,isValid:l}=Rt(e,{nodeId:s.value,id:c.value,type:v(n)},f.value,m.value.nodeId,m.value.handleId||null,m.value.type,t,i,C.value,b),d=a.source===a.target;l&&!d&&S.connect(a),N(e,!0)}else k({nodeId:v(s.value),type:v(n),handleId:v(c.value)},void 0,e,!0)}}}function Ft(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const jt=["data-id","data-handleid","data-nodeid","data-handlepos"],qt=e({name:"Handle",compatConfig:{MODE:3},props:{id:null,type:null,position:{default:"top"},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:!0}},setup(e){const n=Ft(e,["position","connectable","id","isValidConnection"]),r=_(n,"type","source"),i=fl(),l=_(i,"connectionStartHandle"),c=_(i,"vueFlowRef"),d=_(i,"nodesConnectable"),{id:h,node:f,nodeEl:g,connectedEdges:m}=function(e){const t=e??y(Pt,""),n=y(zt,null),{findNode:r,getEdges:i}=fl(),a=r(t);if(!a)throw new Ze(`Node with id ${t} not found!`,"useNode");return{id:t,nodeEl:n,node:a,parentNode:o((()=>a.parentNode?r(a.parentNode):void 0)),connectedEdges:o((()=>mt([a],i.value)))}}(),w=t(),b=o((()=>e.id??`${h}__handle-${e.position}`)),{handlePointerDown:x,handleClick:E}=Lt({nodeId:h,handleId:b.value,isValidConnection:e.isValidConnection,type:r}),N=o((()=>te(e.connectable)&&"single"===e.connectable?!m.value.some((e=>{const t=e[`${r.value}Handle`];return e[r.value]===h&&(!t||t===b.value)})):J(e.connectable)?e.connectable(f,m.value):_t(e.connectable)?e.connectable:d.value));return a((()=>{ce((()=>f.initialized)).toBe(!0).then((()=>{var t;const n=null==(t=f.handleBounds[r.value])?void 0:t.find((e=>e.id===b.value));if(!c.value||n)return;const o=c.value.querySelector(".vue-flow__transformationpane");if(!(g&&w.value&&o&&b.value))return;const i=g.value.getBoundingClientRect(),a=w.value.getBoundingClientRect(),l=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(l.transform),s={id:b.value,position:e.position,x:(a.left-i.left)/u,y:(a.top-i.top)/u,...Je(w.value)};f.handleBounds[r.value]=[...f.handleBounds[r.value]??[],s]}))})),(t,n)=>(u(),s("div",{ref_key:"handle",ref:w,"data-id":`${v(h)}-${v(b)}-${v(r)}`,"data-handleid":v(b),"data-nodeid":v(h),"data-handlepos":e.position,class:k(["vue-flow__handle nodrag",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${v(b)}`,{source:"target"!==v(r),target:"target"===v(r),connectable:v(N),connecting:v(l)&&v(l).nodeId===v(h)&&v(l).handleId===v(b)&&v(l).type===v(r)}]]),onMousedown:n[0]||(n[0]=(...e)=>v(x)&&v(x)(...e)),onTouchstart:n[1]||(n[1]=(...e)=>v(x)&&v(x)(...e)),onClick:n[2]||(n[2]=(...e)=>v(E)&&v(E)(...e))},[p(t.$slots,"default",{id:e.id})],42,jt))}}),Ut=function({sourcePosition:e=kt.Bottom,targetPosition:t=kt.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[r(qt,{type:"target",position:t,connectable:o,isValidConnection:i}),"string"!=typeof n&&n?r(n):r("div",{innerHTML:n}),r(qt,{type:"source",position:e,connectable:o,isValidConnection:a})]};Ut.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],Ut.inheritAttrs=!1,Ut.compatConfig={MODE:3};const Zt=Ut,Kt=function({sourcePosition:e=kt.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return["string"!=typeof t&&t?r(t):r("div",{innerHTML:t}),r(qt,{type:"source",position:e,connectable:n,isValidConnection:o})]};Kt.props=["sourcePosition","label","isValidSourcePos","connectable"],Kt.inheritAttrs=!1,Kt.compatConfig={MODE:3};const Wt=Kt,Gt=function({targetPosition:e=kt.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r(qt,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!=typeof t&&t?r(t):r("div",{innerHTML:t})]};Gt.props=["targetPosition","label","isValidTargetPos","connectable"],Gt.inheritAttrs=!1,Gt.compatConfig={MODE:3};const Qt=Gt;function Jt(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function en(e,t,n,o,r){return e.filter((e=>(e.selected||e.id===r)&&(!e.parentNode||!wt(e,o))&&(e.draggable||t&&typeof e.draggable>"u"))).map((e=>{var t,o;return Y({id:e.id,position:e.position||{x:0,y:0},distance:{x:n.x-(null==(t=e.computedPosition)?void 0:t.x)||0,y:n.y-(null==(o=e.computedPosition)?void 0:o.y)||0},from:e.computedPosition,extent:e.extent,parentNode:e.parentNode,dimensions:e.dimensions})}))}function tn({id:e,dragItems:t,findNode:n}){const o=t.map((e=>n(e.id)));return[e?o.find((t=>t.id===e)):o[0],o]}function nn(e,t,n){var o;let r=e.extent||t;if("parent"===e.extent||!Array.isArray(e.extent)&&"parent"===(null==(o=e.extent)?void 0:o.range))if(e.parentNode&&n&&e.dimensions.width&&e.dimensions.height){const t=function(e,t,n){const[o,r,i,a]="string"!=typeof e?function(e){switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];default:return e||[0,0,0,0]}}(e.padding):[0,0,0,0];return!!(n&&ee(n.computedPosition.x)&&ee(n.computedPosition.y)&&ee(n.dimensions.width)&&ee(n.dimensions.height))&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-r,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-i]]}(e.extent,e,n);t&&(r=t)}else Ke(),r=t;else if(Array.isArray(e.extent)&&e.extent&&n){const t=n.computedPosition.x,o=n.computedPosition.y;r=[[e.extent[0][0]+t,e.extent[0][1]+o],[e.extent[1][0]+t,e.extent[1][1]+o]]}return r}function on(e,t,n,o){const r=nn(e,n,o),i=tt(t,r);return{position:{x:i.x-((null==o?void 0:o.computedPosition.x)||0),y:i.y-((null==o?void 0:o.computedPosition.y)||0)},computedPosition:i}}function rn(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a}=fl();return(l,u=!1)=>{const s=i.value?r.value[0]:5,c=i.value?r.value[1]:5,d=u?4:1,h=l.x*s*d,f=l.y*c*d,v=e.value.filter((e=>e.draggable||a&&typeof e.draggable>"u")).map((e=>{const n={x:e.computedPosition.x+h,y:e.computedPosition.y+f},{computedPosition:r}=on(e,n,t.value,e.parentNode?o(e.parentNode):void 0);return{id:e.id,position:r,from:e.position,distance:{x:l.x,y:l.y},dimensions:e.dimensions}}));n(v,!0,!1)}}const an=()=>({doubleClick:ue(),click:ue(),mouseEnter:ue(),mouseMove:ue(),mouseLeave:ue(),contextMenu:ue(),dragStart:ue(),drag:ue(),dragStop:ue()});function ln(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const r=Array.from(o),i=t.getBoundingClientRect();return r.map((e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left)/n,y:(t.top-i.top)/n,...Je(e)}}))}function un(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),z(a.blur)):n([e])}var sn={value:()=>{}};function cn(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new dn(o)}function dn(e){this._=e}function hn(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function fn(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=sn,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}dn.prototype=cn.prototype={constructor:dn,on:function(e,t){var n,o=this._,r=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",o),i=-1,a=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(e=r[i]).type)o[n]=fn(o[n],e.name,t);else if(null==t)for(n in o)o[n]=fn(o[n],e.name,null);return this}for(;++i<a;)if((n=(e=r[i]).type)&&(n=hn(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new dn(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var vn="http://www.w3.org/1999/xhtml";const pn={svg:"http://www.w3.org/2000/svg",xhtml:vn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gn(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),pn.hasOwnProperty(t)?{space:pn[t],local:e}:e}function mn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vn&&t.documentElement.namespaceURI===vn?t.createElement(e):t.createElementNS(n,e)}}function yn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wn(e){var t=gn(e);return(t.local?yn:mn)(t)}function bn(){}function _n(e){return null==e?bn:function(){return this.querySelector(e)}}function xn(){return[]}function kn(e){return null==e?xn:function(){return this.querySelectorAll(e)}}function En(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function Nn(e){return function(){return this.matches(e)}}function Sn(e){return function(t){return t.matches(e)}}var Mn=Array.prototype.find;function Cn(){return this.firstElementChild}var $n=Array.prototype.filter;function Pn(){return Array.from(this.children)}function zn(e){return new Array(e.length)}function An(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function On(e,t,n,o,r,i){for(var a,l=0,u=t.length,s=i.length;l<s;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new An(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function Bn(e,t,n,o,r,i,a){var l,u,s,c=new Map,d=t.length,h=i.length,f=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(f[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<h;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):n[l]=new An(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(f[l])===u&&(r[l]=u)}function In(e){return e.__data__}function Tn(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Dn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Vn(e){return function(){this.removeAttribute(e)}}function Rn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xn(e,t){return function(){this.setAttribute(e,t)}}function Hn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Yn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ln(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Fn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function jn(e){return function(){this.style.removeProperty(e)}}function qn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Un(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Zn(e,t){return e.style.getPropertyValue(t)||Fn(e).getComputedStyle(e,null).getPropertyValue(t)}function Kn(e){return function(){delete this[e]}}function Wn(e,t){return function(){this[e]=t}}function Gn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Qn(e){return e.trim().split(/^|\s+/)}function Jn(e){return e.classList||new eo(e)}function eo(e){this._node=e,this._names=Qn(e.getAttribute("class")||"")}function to(e,t){for(var n=Jn(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function no(e,t){for(var n=Jn(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function oo(e){return function(){to(this,e)}}function ro(e){return function(){no(this,e)}}function io(e,t){return function(){(t.apply(this,arguments)?to:no)(this,e)}}function ao(){this.textContent=""}function lo(e){return function(){this.textContent=e}}function uo(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function so(){this.innerHTML=""}function co(e){return function(){this.innerHTML=e}}function ho(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fo(){this.nextSibling&&this.parentNode.appendChild(this)}function vo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function po(){return null}function go(){var e=this.parentNode;e&&e.removeChild(this)}function mo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wo(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function bo(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function _o(e,t,n){var o=Fn(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function xo(e,t){return function(){return _o(this,e,t)}}function ko(e,t){return function(){return _o(this,e,t.apply(this,arguments))}}An.prototype={constructor:An,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},eo.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Eo=[null];function No(e,t){this._groups=e,this._parents=t}function So(){return new No([[document.documentElement]],Eo)}function Mo(e){return"string"==typeof e?new No([[document.querySelector(e)]],[document.documentElement]):new No([[e]],Eo)}function Co(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}No.prototype=So.prototype={constructor:No,select:function(e){"function"!=typeof e&&(e=_n(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new No(o,this._parents)},selectAll:function(e){e="function"==typeof e?En(e):kn(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new No(o,r)},selectChild:function(e){return this.select(null==e?Cn:function(e){return function(){return Mn.call(this.children,e)}}("function"==typeof e?e:Sn(e)))},selectChildren:function(e){return this.selectAll(null==e?Pn:function(e){return function(){return $n.call(this.children,e)}}("function"==typeof e?e:Sn(e)))},filter:function(e){"function"!=typeof e&&(e=Nn(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new No(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,In);var n=t?Bn:On,o=this._parents,r=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var i=r.length,a=new Array(i),l=new Array(i),u=new Array(i),s=0;s<i;++s){var c=o[s],d=r[s],h=d.length,f=Tn(e.call(c,c&&c.__data__,s,o)),v=f.length,p=l[s]=new Array(v),g=a[s]=new Array(v);n(c,d,p,g,u[s]=new Array(h),f,t);for(var m,y,w=0,b=0;w<v;++w)if(m=p[w]){for(w>=b&&(b=w+1);!(y=g[b])&&++b<v;);m._next=y||null}}return(a=new No(a,o))._enter=l,a._exit=u,a},enter:function(){return new No(this._enter||this._groups.map(zn),this._parents)},exit:function(){return new No(this._exit||this._groups.map(zn),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&((r=t(r))&&(r=r.selection())),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=n[u],d=o[u],h=c.length,f=l[u]=new Array(h),v=0;v<h;++v)(s=c[v]||d[v])&&(f[v]=s);for(;u<r;++u)l[u]=n[u];return new No(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Dn);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new No(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=gn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Rn:Vn:"function"==typeof t?n.local?Ln:Yn:n.local?Hn:Xn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?jn:"function"==typeof t?Un:qn)(e,t,n??"")):Zn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Kn:"function"==typeof t?Gn:Wn)(e,t)):this.node()[e]},classed:function(e,t){var n=Qn(e+"");if(arguments.length<2){for(var o=Jn(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?io:t?oo:ro)(n,t))},text:function(e){return arguments.length?this.each(null==e?ao:("function"==typeof e?uo:lo)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?so:("function"==typeof e?ho:co)(e)):this.node().innerHTML},raise:function(){return this.each(fo)},lower:function(){return this.each(vo)},append:function(e){var t="function"==typeof e?e:wn(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:wn(e),o=null==t?po:"function"==typeof t?t:_n(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(go)},clone:function(e){return this.select(e?yo:mo)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?bo:wo,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?ko:xo)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const $o={passive:!1},Po={capture:!0,passive:!1};function zo(e){e.stopImmediatePropagation()}function Ao(e){e.preventDefault(),e.stopImmediatePropagation()}function Oo(e){var t=e.document.documentElement,n=Mo(e).on("dragstart.drag",Ao,Po);"onselectstart"in t?n.on("selectstart.drag",Ao,Po):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bo(e,t){var n=e.document.documentElement,o=Mo(e).on("dragstart.drag",null);t&&(o.on("click.drag",Ao,Po),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Io=e=>()=>e;function To(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function Do(e){return!e.ctrlKey&&!e.button}function Vo(){return this.parentNode}function Ro(e,t){return t??{x:e.x,y:e.y}}function Xo(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ho(e){const n=w();return le((()=>n.stop())),n.run((()=>{const n=fl(),r=_(n,"vueFlowRef"),i=_(n,"snapToGrid"),a=_(n,"snapGrid"),l=_(n,"noDragClassName"),u=_(n,"nodes"),s=_(n,"nodeExtent"),c=_(n,"viewport"),d=_(n,"autoPanOnNodeDrag"),h=_(n,"nodesDraggable"),f=_(n,"panBy"),v=_(n,"findNode"),p=_(n,"multiSelectionActive"),m=_(n,"nodesSelectionActive"),y=_(n,"selectNodesOnDrag"),w=_(n,"removeSelectedElements"),b=_(n,"addSelectedNodes"),x=_(n,"updateNodePositions"),k=e,E=_(k,"onStart"),N=_(k,"onDrag"),S=_(k,"onStop"),M=_(k,"el"),C=_(k,"disabled"),$=_(k,"id"),P=_(k,"selectable"),z=t(!1);let A=t([]),O=t(),B=t(null),I=t({x:void 0,y:void 0}),T=t({x:0,y:0}),D=t(null),V=t(0),R=t(!1);const X=o((()=>$.value?v.value($.value):void 0)),H=function(){const{viewport:e,snapGrid:t,snapToGrid:n}=fl();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y,...a}}}();return g([()=>C.value,()=>M.value],(()=>{if(M.value){const e=Mo(M.value),t=({x:e,y:t})=>{I.value={x:e,y:t};let n=!1;if(A.value=A.value.map((o=>{const r={x:e-o.distance.x,y:t-o.distance.y};i.value&&(r.x=a.value[0]*Math.round(r.x/a.value[0]),r.y=a.value[1]*Math.round(r.y/a.value[1]));const{computedPosition:l}=on(o,r,s.value,o.parentNode?v.value(o.parentNode):void 0);return n=n||o.position.x!==l.x||o.position.y!==l.y,o.position=l,o})),n&&(x.value(A.value,!0,!0),z.value=!0,D.value)){const[e,t]=tn({id:$.value,dragItems:A.value,findNode:v.value});N.value(D.value,e,t)}},n=()=>{if(!B.value)return;const[e,o]=Ht(T.value,B.value);(0!==e||0!==o)&&(I.value.x=(I.value.x??0)-e/c.value.zoom,I.value.y=(I.value.y??0)-o/c.value.zoom,t(I.value),f.value({x:e,y:o})),V.value=requestAnimationFrame(n)};C.value?e.on(".drag",null):(O.value=function(){var e,t,n,o,r=Do,i=Vo,a=Ro,l=Xo,u={},s=cn("start","drag","end"),c=0,d=0;function h(e){e.on("mousedown.drag",f).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,$o).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(a,l){if(!o&&r.call(this,a,l)){var u=w(this,i.call(this,a,l),a,l,"mouse");u&&(Mo(a.view).on("mousemove.drag",v,Po).on("mouseup.drag",p,Po),Oo(a.view),zo(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function v(o){if(Ao(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function p(e){Mo(e.view).on("mousemove.drag mouseup.drag",null),Bo(e.view,n),Ao(e),u.mouse("end",e)}function g(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,l=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(zo(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(Ao(e),n("drag",e,o[t]))}function y(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=u[r[t].identifier])&&(zo(e),n("end",e,r[t]))}function w(e,t,n,o,r,i){var l,d,f,v=s.copy(),p=Co(i||n,t);if(null!=(f=a.call(e,new To("beforestart",{sourceEvent:n,target:h,identifier:r,active:c,x:p[0],y:p[1],dx:0,dy:0,dispatch:v}),o)))return l=f.x-p[0]||0,d=f.y-p[1]||0,function n(i,a,s){var g,m=p;switch(i){case"start":u[r]=n,g=c++;break;case"end":delete u[r],--c;case"drag":p=Co(s||a,t),g=c}v.call(i,e,new To(i,{sourceEvent:a,subject:f,target:h,identifier:r,active:g,x:p[0]+l,y:p[1]+d,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:v}),o)}}return h.filter=function(e){return arguments.length?(r="function"==typeof e?e:Io(!!e),h):r},h.container=function(e){return arguments.length?(i="function"==typeof e?e:Io(e),h):i},h.subject=function(e){return arguments.length?(a="function"==typeof e?e:Io(e),h):a},h.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Io(!!e),h):l},h.on=function(){var e=s.on.apply(s,arguments);return e===s?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}().on("start",(e=>{var t,n;!y.value&&!p.value&&$.value&&(null!=(t=X.value)&&t.selected||w.value()),X.value&&P.value&&y.value&&un(X.value,p.value,b.value,w.value,m,!1,M.value);const o=H(e);if(I.value=o,A.value=en(u.value,h.value,o,v.value,$.value),A.value.length){const[t,n]=tn({id:$.value,dragItems:A.value,findNode:v.value});E.value(e.sourceEvent,t,n)}B.value=(null==(n=r.value)?void 0:n.getBoundingClientRect())||null,T.value=Tt(e.sourceEvent,B.value)})).on("drag",(e=>{const o=H(e);!R.value&&d.value&&(R.value=!0,n()),(I.value.x!==o.xSnapped||I.value.y!==o.ySnapped)&&A.value.length&&(D.value=e.sourceEvent,T.value=Tt(e.sourceEvent,B.value),t(o))})).on("end",(e=>{if(z.value=!1,R.value=!1,cancelAnimationFrame(V.value),A.value.length){x.value(A.value,!1,!1);const[t,n]=tn({id:$.value,dragItems:A.value,findNode:v.value});S.value(e.sourceEvent,t,n)}})).filter((e=>{var t;const n=e.target;return!e.button&&(!l.value||!Jt(n,`.${l.value}`,M.value)&&(!(null!=(t=X.value)&&t.dragHandle)||Jt(n,X.value.dragHandle,M.value)))})),e.call(O.value))}})),z}))}function Yo(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,r=!!J(o.hasAttribute)&&o.hasAttribute("contenteditable"),i=J(o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||r||!!i}To.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const Lo=(e,n)=>{const o=We();let r=t(!0===v(e)),i=t(!1);const a=t(new Set);return g(r,(()=>{n&&"function"==typeof n&&n(r.value)})),x((()=>{let t=v(e);typeof o.addEventListener<"u"&&$e(o,"blur",(()=>{r.value=!1})),(e=>"boolean"==typeof e)(t)?r.value=t:(Array.isArray(t)&&(t=function(e,t){return n=>e.some((e=>{const o=e.split("+").map((e=>e.trim().toLowerCase()));return 1===o.length?n.key===e:(t.add(n.key.toLowerCase()),o.every((e=>t.has(e))))}))}(t,a.value)),t&&(ze(t,(e=>{i.value=function(e){return e.ctrlKey||e.metaKey||e.shiftKey}(e),(i.value||!Yo(e))&&(e.preventDefault(),r.value=!0)}),{eventName:"keydown"}),ze(t,(e=>{if(r.value){if(!i.value&&Yo(e))return;i.value=!1,a.value.clear(),r.value=!1}}),{eventName:"keyup"})))})),r},Fo="vue-flow__node-desc",jo="vue-flow__edge-desc",qo=["Enter"," ","Escape"],Uo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Zo=["tabIndex","role","aria-describedby","aria-label","data-id"],Ko=e({name:"Node",inheritAttrs:!1,compatConfig:{MODE:3},props:{id:null,draggable:{type:Boolean},selectable:{type:Boolean},connectable:null,focusable:{type:Boolean},type:{type:[null,String,Function,Object,Boolean]},name:null,node:null,resizeObserver:null},setup(e){const r=Ft(e,["id","type","name","draggable","selectable","connectable"]);n(Pt,e.id);const i=fl(),l=_(i,"id"),c=_(i,"edges"),d=_(i,"noPanClassName"),h=_(i,"selectNodesOnDrag"),f=_(i,"nodesSelectionActive"),p=_(i,"multiSelectionActive"),m=_(i,"emits"),y=_(i,"findNode"),w=_(i,"removeSelectedNodes"),b=_(i,"addSelectedNodes"),x=_(i,"updateNodeDimensions"),E=_(i,"onUpdateNodeInternals"),N=_(i,"getIntersectingNodes"),S=_(i,"getNodeTypes"),M=_(i,"nodeExtent"),C=_(i,"elevateNodesOnSelect"),$=_(i,"disableKeyboardA11y"),P=_(i,"ariaLiveMessage"),z=_(i,"snapToGrid"),B=_(i,"snapGrid"),T=rn(),V=qe(r,"node"),R=o((()=>V.value.parentNode?y.value(V.value.parentNode):void 0)),X=o((()=>mt([V.value],c.value))),H=t();n(zt,H);const{emit:Y,on:L}=function(e,t){const n=an();return n.doubleClick.on((n=>{var o,r;t.nodeDoubleClick(n),null==(r=null==(o=e.events)?void 0:o.doubleClick)||r.call(o,n)})),n.click.on((n=>{var o,r;t.nodeClick(n),null==(r=null==(o=e.events)?void 0:o.click)||r.call(o,n)})),n.mouseEnter.on((n=>{var o,r;t.nodeMouseEnter(n),null==(r=null==(o=e.events)?void 0:o.mouseEnter)||r.call(o,n)})),n.mouseMove.on((n=>{var o,r;t.nodeMouseMove(n),null==(r=null==(o=e.events)?void 0:o.mouseMove)||r.call(o,n)})),n.mouseLeave.on((n=>{var o,r;t.nodeMouseLeave(n),null==(r=null==(o=e.events)?void 0:o.mouseLeave)||r.call(o,n)})),n.contextMenu.on((n=>{var o,r;t.nodeContextMenu(n),null==(r=null==(o=e.events)?void 0:o.contextMenu)||r.call(o,n)})),n.dragStart.on((n=>{var o,r;t.nodeDragStart(n),null==(r=null==(o=e.events)?void 0:o.dragStart)||r.call(o,n)})),n.drag.on((n=>{var o,r;t.nodeDrag(n),null==(r=null==(o=e.events)?void 0:o.drag)||r.call(o,n)})),n.dragStop.on((n=>{var o,r;t.nodeDragStop(n),null==(r=null==(o=e.events)?void 0:o.dragStop)||r.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}(V.value,m.value),F=Ho({id:e.id,el:H,disabled:o((()=>!e.draggable)),selectable:o((()=>e.selectable)),onStart(e,t,n){Y.dragStart({event:e,node:t,nodes:n,intersections:N.value(t)})},onDrag(e,t,n){Y.drag({event:e,node:t,nodes:n,intersections:N.value(t)})},onStop(e,t,n){Y.dragStop({event:e,node:t,nodes:n,intersections:N.value(t)})}}),j=o((()=>V.value.class instanceof Function?V.value.class(V.value):V.value.class)),q=o((()=>{const e=(V.value.style instanceof Function?V.value.style(V.value):V.value.style)||{},t=V.value.width instanceof Function?V.value.width(V.value):V.value.width,n=V.value.height instanceof Function?V.value.height(V.value):V.value.height;return t&&(e.width="string"==typeof t?t:`${t}px`),n&&(e.height="string"==typeof n?n:`${n}px`),e})),U=o((()=>Number(V.value.zIndex??q.value.zIndex??0)));function Z(){const e=V.value.computedPosition;z.value&&(e.x=B.value[0]*Math.round(e.x/B.value[0]),e.y=B.value[1]*Math.round(e.y/B.value[1]));const{computedPosition:t,position:n}=on(V.value,e,M.value,R.value);(V.value.computedPosition.x!==t.x||V.value.computedPosition.y!==t.y)&&(V.value.computedPosition={...V.value.computedPosition,...t}),(V.value.position.x!==n.x||V.value.position.y!==n.y)&&(V.value.position=n)}function K(){H.value&&x.value([{id:e.id,nodeElement:H.value,forceUpdate:!0}])}function W(e){null!=F&&F.value||Y.mouseEnter({event:e,node:V.value,connectedEdges:X.value})}function G(e){null!=F&&F.value||Y.mouseMove({event:e,node:V.value,connectedEdges:X.value})}function Q(e){null!=F&&F.value||Y.mouseLeave({event:e,node:V.value,connectedEdges:X.value})}function J(e){return Y.contextMenu({event:e,node:V.value,connectedEdges:X.value})}function te(e){return Y.doubleClick({event:e,node:V.value,connectedEdges:X.value})}function ne(t){e.selectable&&(!h.value||!e.draggable)&&un(V.value,p.value,b.value,w.value,f,!1,H.value),Y.click({event:t,node:V.value,connectedEdges:X.value})}function oe(t){var n;if(!Yo(t))if(qo.includes(t.key)&&e.selectable){const e="Escape"===t.key;e&&(null==(n=H.value)||n.blur()),un(V.value,p.value,b.value,w.value,f,e,H.value)}else!$.value&&e.draggable&&V.value.selected&&Uo[t.key]&&(P.value=`Moved selected node ${t.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~V.value.position.x}, y: ${~~V.value.position.y}`,T({x:Uo[t.key].x,y:Uo[t.key].y},t.shiftKey))}return E.value((t=>{t.includes(e.id)&&K()})),a((()=>{r.resizeObserver.observe(H.value)})),I((()=>{r.resizeObserver.unobserve(H.value)})),g([()=>V.value.type,()=>V.value.sourcePosition,()=>V.value.targetPosition],(()=>{x.value([{id:e.id,nodeElement:H.value,forceUpdate:!0}])}),{flush:"pre"}),g([()=>V.value.position.x,()=>V.value.position.y,()=>{var e;return null==(e=R.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=R.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=R.value)?void 0:e.computedPosition.z},()=>V.value.selected,()=>V.value.dimensions.height,()=>V.value.dimensions.width,()=>{var e;return null==(e=R.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=R.value)?void 0:e.dimensions.width},U],(([e,t,n,o,r])=>{const i={x:e,y:t,z:U.value+(C.value&&V.value.selected?1e3:0)};ee(n)&&ee(o)?V.value.computedPosition=function(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}({x:n,y:o,z:r},i):V.value.computedPosition=i}),{flush:"pre",immediate:!0}),g([()=>V.value.extent,()=>M.value],(([e,t],[n,o])=>{(e!==n||t!==o)&&Z()})),"parent"===V.value.extent||"object"==typeof V.value.extent&&"range"in V.value.extent&&"parent"===V.value.extent.range?ce((()=>V.value.initialized)).toBe(!0).then(Z):Z(),(t,n)=>(u(),s("div",{ref_key:"nodeElement",ref:H,class:k(["vue-flow__node",[`vue-flow__node-${!1===e.type?"default":e.name}`,{[v(d)]:e.draggable,dragging:v(F),selected:v(V).selected,selectable:e.selectable},v(j)]]),style:O({zIndex:v(V).computedPosition.z??v(U),transform:`translate(${v(V).computedPosition.x}px,${v(V).computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:v(V).initialized?"visible":"hidden",...v(q)}),tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":v($)?void 0:`${v(Fo)}-${v(l)}`,"aria-label":v(V).ariaLabel,"data-id":v(V).id,onMouseenter:W,onMousemove:G,onMouseleave:Q,onContextmenu:J,onClick:ne,onDblclick:te,onKeydown:oe},[(u(),A(D(!1===e.type?v(S).default:e.type),{id:v(V).id,type:v(V).type,data:v(V).data,events:{...v(V).events,...v(L)},selected:!!v(V).selected,resizing:!!v(V).resizing,dragging:v(F),connectable:e.connectable,position:v(V).position,dimensions:v(V).dimensions,"is-valid-target-pos":v(V).isValidTargetPos,"is-valid-source-pos":v(V).isValidSourcePos,"parent-node":v(V).parentNode,"z-index":v(V).computedPosition.z,"target-position":v(V).targetPosition,"source-position":v(V).sourcePosition,label:v(V).label,"drag-handle":v(V).dragHandle,onUpdateNodeInternals:K},null,40,["id","type","data","events","selected","resizing","dragging","connectable","position","dimensions","is-valid-target-pos","is-valid-source-pos","parent-node","z-index","target-position","source-position","label","drag-handle"]))],46,Zo))}}),Wo=["transform"],Go=["width","height","x","y","rx","ry"],Qo=["y"],Jo=e({name:"EdgeText",compatConfig:{MODE:3},props:{x:null,y:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){let n=t({x:0,y:0,width:0,height:0});const r=t(null),i=o((()=>`translate(${e.x-n.value.width/2} ${e.y-n.value.height/2})`));function l(){if(!r.value)return;const e=r.value.getBBox();(e.width!==n.value.width||e.height!==n.value.height)&&(n.value=e)}return a(l),g([()=>e.x,()=>e.y,r,()=>e.label],l),(t,o)=>(u(),s("g",{transform:v(i),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(u(),s("rect",{key:0,class:"vue-flow__edge-textbg",width:`${v(n).width+2*e.labelBgPadding[0]}px`,height:`${v(n).height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:O(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Go)):S("",!0),E("text",R(t.$attrs,{ref_key:"el",ref:r,class:"vue-flow__edge-text",y:v(n).height/2,dy:"0.3em",style:e.labelStyle}),[p(t.$slots,"default",{},(()=>[v(te)(e.label)?(u(),s(h,{key:1},[L(N(e.label),1)],64)):(u(),A(D(e.label),{key:0}))]))],16,Qo)],8,Wo))}}),er=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:u=!0,labelStyle:s,markerStart:c,markerEnd:d,interactionWidth:h=20},{attrs:f}){return[r("path",{style:f.style,class:["vue-flow__edge-path",f.class].join(" "),d:e,"marker-end":d,"marker-start":c}),h?r("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":h}):null,t&&ee(n)&&ee(o)?r(Jo,{x:n,y:o,label:t,labelStyle:s,labelShowBg:u,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};er.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"],er.inheritAttrs=!1,er.compatConfig={MODE:3};const tr=er;function nr({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2;return[i,o<t?o+a:o-a,r,a]}function or({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const u=.125*e+.375*r+.375*a+.125*n,s=.125*t+.375*i+.375*l+.125*o;return[u,s,Math.abs(u-e),Math.abs(s-t)]}function rr(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ir({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case kt.Left:a=t-rr(t-o,i),l=n;break;case kt.Right:a=t+rr(o-t,i),l=n;break;case kt.Top:a=t,l=n-rr(n-r,i);break;case kt.Bottom:a=t,l=n+rr(r-n,i)}return[a,l]}function ar({sourceX:e,sourceY:t,sourcePosition:n=kt.Bottom,targetX:o,targetY:r,targetPosition:i=kt.Top,curvature:a=.25}){const[l,u]=ir({pos:n,x1:e,y1:t,x2:o,y2:r,c:a}),[s,c]=ir({pos:i,x1:o,y1:r,x2:e,y2:t,c:a}),[d,h,f,v]=or({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${e},${t} C${l},${u} ${s},${c} ${o},${r}`,d,h,f,v]}const lr=function({sourcePosition:e=kt.Bottom,targetPosition:t=kt.Top,...n},{attrs:o}){const[i,a,l]=ar({sourcePosition:e,targetPosition:t,...n});return r(tr,{path:i,labelX:a,labelY:l,...n,...o})};lr.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],lr.inheritAttrs=!1,lr.compatConfig={MODE:3};const ur=lr;function sr({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case kt.Left:case kt.Right:i=.5*(t+o),a=n;break;case kt.Top:case kt.Bottom:i=t,a=.5*(n+r)}return[i,a]}function cr({sourceX:e,sourceY:t,sourcePosition:n=kt.Bottom,targetX:o,targetY:r,targetPosition:i=kt.Top}){const[a,l]=sr({pos:n,x1:e,y1:t,x2:o,y2:r}),[u,s]=sr({pos:i,x1:o,y1:r,x2:e,y2:t}),[c,d,h,f]=or({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:s});return[`M${e},${t} C${a},${l} ${u},${s} ${o},${r}`,c,d,h,f]}const dr=function({sourcePosition:e=kt.Bottom,targetPosition:t=kt.Top,...n},{attrs:o}){const[i,a,l]=cr({sourcePosition:e,targetPosition:t,...n});return r(tr,{path:i,labelX:a,labelY:l,...n,...o})};dr.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],dr.inheritAttrs=!1,dr.compatConfig={MODE:3};const hr=dr,fr={[kt.Left]:{x:-1,y:0},[kt.Right]:{x:1,y:0},[kt.Top]:{x:0,y:-1},[kt.Bottom]:{x:0,y:1}},vr=({source:e,sourcePosition:t=kt.Bottom,target:n})=>t===kt.Left||t===kt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},pr=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2);function gr({sourceX:e,sourceY:t,sourcePosition:n=kt.Bottom,targetX:o,targetY:r,targetPosition:i=kt.Top,borderRadius:a=5,centerX:l,centerY:u,offset:s=20}){const[c,d,h,f,v]=function({source:e,sourcePosition:t=kt.Bottom,target:n,targetPosition:o=kt.Top,center:r,offset:i}){const a=fr[t],l=fr[o],u={x:e.x+a.x*i,y:e.y+a.y*i},s={x:n.x+l.x*i,y:n.y+l.y*i},c=vr({source:u,sourcePosition:t,target:s}),d=0!==c.x?"x":"y",h=c[d];let f,v,p;const[g,m,y,w]=nr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*l[d]==-1){v=r.x||g,p=r.y||m;const e=[{x:v,y:u.y},{x:v,y:s.y}],t=[{x:u.x,y:p},{x:s.x,y:p}];f=a[d]===h?"x"===d?e:t:"x"===d?t:e}else{const e=[{x:u.x,y:s.y}],n=[{x:s.x,y:u.y}];if(f="x"===d?a.x===h?n:e:a.y===h?e:n,t!==o){const t="x"===d?"y":"x",o=a[d]===l[t],r=u[t]>s[t],i=u[t]<s[t];(1===a[d]&&(!o&&r||o&&i)||1!==a[d]&&(!o&&i||o&&r))&&(f="x"===d?e:n)}v=f[0].x,p=f[0].y}return[[e,u,...f,s,n],v,p,y,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:l,y:u},offset:s});return[c.reduce(((e,t,n)=>{let o;return o=n>0&&n<c.length-1?function(e,t,n,o){const r=Math.min(pr(e,t)/2,pr(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+r*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+r*(e.y<n.y?1:-1)}`;const l=e.x<n.x?1:-1;return`L ${i},${a+r*(e.y<n.y?-1:1)}Q ${i},${a} ${i+r*l},${a}`}(c[n-1],t,c[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),d,h,f,v]}const mr=function({sourcePosition:e=kt.Bottom,targetPosition:t=kt.Top,...n},{attrs:o}){const[i,a,l]=gr({sourcePosition:e,targetPosition:t,...n});return r(tr,{path:i,labelX:a,labelY:l,...n,...o})};mr.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],mr.inheritAttrs=!1,mr.compatConfig={MODE:3};const yr=mr,wr=function(e,{attrs:t}){return r(yr,{...e,...t,borderRadius:0})};wr.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],wr.inheritAttrs=!1,wr.compatConfig={MODE:3};const br=wr;function _r({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,a,l]=nr({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,a,l]}const xr=function(e,{attrs:t}){const[n,o,i]=_r(e);return r(tr,{path:n,labelX:o,labelY:i,...e,...t})};xr.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],xr.inheritAttrs=!1,xr.compatConfig={MODE:3};const kr=xr,Er=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=kt.Top}){return r("circle",{class:"vue-flow__edgeupdater",cx:(()=>{const n=((e,t,n)=>n===kt.Left?e-t:n===kt.Right?e+t:e)(t,e,o);return isNaN(n)?0:n})(),cy:(()=>{const t=((e,t,n)=>n===kt.Top?e-t:n===kt.Bottom?e+t:e)(n,e,o);return isNaN(t)?0:t})(),r:e,stroke:"transparent",fill:"transparent"})};Er.props=["radius","centerX","centerY","position"],Er.compatConfig={MODE:3};const Nr=Er,Sr=()=>({doubleClick:ue(),click:ue(),mouseEnter:ue(),mouseMove:ue(),mouseLeave:ue(),contextMenu:ue(),updateStart:ue(),update:ue(),updateEnd:ue()});function Mr(e,t,n){const o=((null==n?void 0:n.x)??0)+t.x,r=((null==n?void 0:n.y)??0)+t.y,i=(null==n?void 0:n.width)??t.width,a=(null==n?void 0:n.height)??t.height;switch(e){case kt.Top:return{x:o+i/2,y:r};case kt.Right:return{x:o+i,y:r+a/2};case kt.Bottom:return{x:o+i/2,y:r+a};case kt.Left:return{x:o,y:r+a/2}}}function Cr(e=[],t){if(!e.length)return;let n;return t||1!==e.length?t&&(n=e.find((e=>e.id===t))):n=e[0],n||e[0]}const $r=e({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:i,addSelectedEdges:a,connectionMode:l,edgeUpdaterRadius:u,emits:s,nodesSelectionActive:c,noPanClassName:d,getEdgeTypes:h,removeSelectedEdges:f,findEdge:v,findNode:p,isValidConnection:g}=fl(),m=function(e,t){const n=Sr();return n.doubleClick.on((n=>{var o,r;t.edgeDoubleClick(n),null==(r=null==(o=e.events)?void 0:o.doubleClick)||r.call(o,n)})),n.click.on((n=>{var o,r;t.edgeClick(n),null==(r=null==(o=e.events)?void 0:o.click)||r.call(o,n)})),n.mouseEnter.on((n=>{var o,r;t.edgeMouseEnter(n),null==(r=null==(o=e.events)?void 0:o.mouseEnter)||r.call(o,n)})),n.mouseMove.on((n=>{var o,r;t.edgeMouseMove(n),null==(r=null==(o=e.events)?void 0:o.mouseMove)||r.call(o,n)})),n.mouseLeave.on((n=>{var o,r;t.edgeMouseLeave(n),null==(r=null==(o=e.events)?void 0:o.mouseLeave)||r.call(o,n)})),n.contextMenu.on((n=>{var o,r;t.edgeContextMenu(n),null==(r=null==(o=e.events)?void 0:o.contextMenu)||r.call(o,n)})),n.updateStart.on((n=>{var o,r;t.edgeUpdateStart(n),null==(r=null==(o=e.events)?void 0:o.updateStart)||r.call(o,n)})),n.update.on((n=>{var o,r;t.edgeUpdate(n),null==(r=null==(o=e.events)?void 0:o.update)||r.call(o,n)})),n.updateEnd.on((n=>{var o,r;t.edgeUpdateEnd(n),null==(r=null==(o=e.events)?void 0:o.updateEnd)||r.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}(e.edge,s),y=qe(e,"edge");let w=t(!1),b=t(!1);const _=t(""),x=t(null),k=t("source"),E=t("source"),N=t();n(At,e.id),n(Ot,N);const S=o((()=>p(y.value.source))),M=o((()=>p(y.value.target))),C=o((()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class)),$=o((()=>y.value.style instanceof Function?y.value.style(y.value):y.value.style)),{handlePointerDown:P}=Lt({nodeId:_,handleId:x,type:k,isValidConnection:g.value,edgeUpdaterType:E,onEdgeUpdate:function(e,t){m.emit.update({event:e,edge:y.value,connection:t})},onEdgeUpdateEnd:function(e){m.emit.updateEnd({event:e,edge:y.value}),b.value=!1}});return()=>{if(!S.value||!M.value||!y.value)return null;let t;t=l.value===St.Strict?S.value.handleBounds.source:[...S.value.handleBounds.source||[],...S.value.handleBounds.target||[]];const n=Cr(t,y.value.sourceHandle);let o;o=l.value===St.Strict?M.value.handleBounds.target:[...M.value.handleBounds.target||[],...M.value.handleBounds.source||[]];const a=Cr(o,y.value.targetHandle),s=n?n.position:kt.Bottom,c=a?a.position:kt.Top,{sourceX:f,sourceY:v,targetY:p,targetX:g}=function(e,t,n,o,r,i){const a=Mr(n,{...e.dimensions,...e.computedPosition},t),l=Mr(i,{...o.dimensions,...o.computedPosition},r);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}}(S.value,n,s,M.value,a,c);return r("g",{ref:N,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===e.type?"default":e.name}`,d.value,C.value,{updating:w.value,selected:y.value.selected,animated:y.value.animated,inactive:!e.selectable}],onClick:B,onContextmenu:I,onDblclick:T,onMouseenter:D,onMousemove:V,onMouseleave:R,onKeyDown:e.focusable?Y:void 0,tabIndex:e.focusable?0:void 0,"aria-label":null===y.value.ariaLabel?void 0:y.value.ariaLabel||`Edge from ${y.value.source} to ${y.value.target}`,"aria-describedby":e.focusable?`${jo}-${i}`:void 0,role:e.focusable?"button":void 0},[b.value?null:r(!1===e.type?h.value.default:e.type,{id:e.id,sourceNode:S.value,targetNode:M.value,source:y.value.source,target:y.value.target,type:y.value.type,updatable:e.updatable,selected:y.value.selected,animated:y.value.animated,label:y.value.label,labelStyle:y.value.labelStyle,labelShowBg:y.value.labelShowBg,labelBgStyle:y.value.labelBgStyle,labelBgPadding:y.value.labelBgPadding,labelBgBorderRadius:y.value.labelBgBorderRadius,data:y.value.data,events:{...y.value.events,...m.on},style:$.value,markerStart:`url(#${bt(y.value.markerStart,i)})`,markerEnd:`url(#${bt(y.value.markerEnd,i)})`,sourcePosition:s,targetPosition:c,sourceX:f,sourceY:v,targetX:g,targetY:p,sourceHandleId:y.value.sourceHandle,targetHandleId:y.value.targetHandle,interactionWidth:y.value.interactionWidth}),["source"===e.updatable||!0===e.updatable?[r("g",{onMousedown:X,onMouseenter:z,onMouseout:A},r(Nr,{position:s,centerX:f,centerY:v,radius:u.value,"data-type":"source"}))]:null,"target"===e.updatable||!0===e.updatable?[r("g",{onMousedown:H,onMouseenter:z,onMouseout:A},r(Nr,{position:c,centerX:g,centerY:p,radius:u.value,"data-type":"target"}))]:null]])};function z(){w.value=!0}function A(){w.value=!1}function O(e,t){0===e.button&&(b.value=!0,_.value=t?y.value.target:y.value.source,x.value=(t?y.value.targetHandle:y.value.sourceHandle)??"",k.value=t?"target":"source",E.value=k.value,m.emit.updateStart({event:e,edge:y.value}),P(e))}function B(t){const n={event:t,edge:y.value};e.selectable&&(c.value=!1,a([y.value])),m.emit.click(n)}function I(e){m.emit.contextMenu({event:e,edge:y.value})}function T(e){m.emit.doubleClick({event:e,edge:y.value})}function D(e){m.emit.mouseEnter({event:e,edge:y.value})}function V(e){m.emit.mouseMove({event:e,edge:y.value})}function R(e){m.emit.mouseLeave({event:e,edge:y.value})}function X(e){O(e,!0)}function H(e){O(e,!1)}function Y(t){var n;qo.includes(t.key)&&e.selectable&&("Escape"===t.key?(null==(n=N.value)||n.blur(),f([v(e.id)])):a([v(e.id)]))}}}),Pr=$r,zr={class:"vue-flow__connection"},Ar=["d","marker-end","marker-start"],Or=e({name:"ConnectionLine",compatConfig:{MODE:3},props:{sourceNode:null},setup(e){var t;const n=fl(),r=_(n,"connectionMode"),i=_(n,"connectionStartHandle"),a=_(n,"connectionPosition"),l=_(n,"connectionLineType"),c=_(n,"connectionLineStyle"),d=_(n,"connectionLineOptions"),h=_(n,"connectionStatus"),f=_(n,"viewport"),p=_(n,"findNode"),g={[kt.Left]:kt.Right,[kt.Right]:kt.Left,[kt.Top]:kt.Bottom,[kt.Bottom]:kt.Top},m=null==(t=y(Bt))?void 0:t["connection-line"],w=o((()=>i.value.handleId)),b=o((()=>i.value.type)),x=o((()=>{var e;return(null==(e=i.value)?void 0:e.result)&&p.value(i.value.result.connection.target)||null})),E=o((()=>{var t,n;return(r.value===St.Strict?null==(t=e.sourceNode.handleBounds[b.value])?void 0:t.find((e=>e.id===w.value)):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find((e=>e.id===w.value)))||(null==(n=e.sourceNode.handleBounds[b.value??"source"])?void 0:n[0])})),N=o((()=>{var e,t,n,o;return x.value&&(null==(t=null==(e=i.value)?void 0:e.result)?void 0:t.handleId)&&((r.value===St.Strict?null==(n=x.value.handleBounds["source"===b.value?"target":"source"])?void 0:n.find((e=>{var t,n;return e.id===(null==(n=null==(t=i.value)?void 0:t.result)?void 0:n.handleId)})):[...x.value.handleBounds.source||[],...x.value.handleBounds.target||[]].find((e=>{var t,n;return e.id===(null==(n=null==(t=i.value)?void 0:t.result)?void 0:n.handleId)})))||(null==(o=x.value.handleBounds[b.value??"target"])?void 0:o[0]))||null})),S=o((()=>E.value?E.value.x+E.value.width/2:e.sourceNode.dimensions.width/2)),M=o((()=>E.value?E.value.y+E.value.height/2:e.sourceNode.dimensions.height)),C=o((()=>e.sourceNode.computedPosition.x+S.value)),$=o((()=>e.sourceNode.computedPosition.y+M.value)),P=o((()=>{var e;return null==(e=E.value)?void 0:e.position})),z=o((()=>P.value?g[P.value]:void 0)),B=o((()=>(a.value.x-f.value.x)/f.value.zoom)),I=o((()=>(a.value.y-f.value.y)/f.value.zoom)),T=o((()=>{let e;const t={sourceX:C.value,sourceY:$.value,sourcePosition:P.value,targetX:B.value,targetY:I.value,targetPosition:z.value};switch(l.value??d.value.type){case Nt.Bezier:[e]=ar(t);break;case Nt.Step:[e]=gr({...t,borderRadius:0});break;case Nt.SmoothStep:[e]=gr(t);break;case Nt.SimpleBezier:[e]=cr(t);break;case Nt.Straight:[e]=_r(t);break;default:[e]=ar(t)}return e}));return(t,n)=>{var o;return u(),s("g",zr,[v(m)?(u(),A(D(v(m)),V(R({key:0},{sourceX:v(C),sourceY:v($),sourcePosition:null==(o=v(E))?void 0:o.position,targetX:v(B),targetY:v(I),targetPosition:v(z),sourceNode:e.sourceNode,sourceHandle:v(E),targetNode:v(x),targetHandle:v(N),markerEnd:`url(#${v(bt)(v(d).markerEnd)})`,markerStart:`url(#${v(bt)(v(d).markerStart)})`,connectionStatus:v(h)})),null,16)):(u(),s("path",{key:1,d:v(T),class:k(["vue-flow__connection-path",[v(d).class,v(h)]]),style:O(v(c)||v(d).style||{}),"marker-end":`url(#${v(bt)(v(d).markerEnd)})`,"marker-start":`url(#${v(bt)(v(d).markerStart)})`},null,14,Ar))])}}}),Br=["tabIndex"],Ir=e({name:"NodesSelection",compatConfig:{MODE:3},setup(e){const n=fl(),r=_(n,"emits"),i=_(n,"viewport"),l=_(n,"getSelectedNodes"),c=_(n,"noPanClassName"),d=_(n,"disableKeyboardA11y"),h=_(n,"userSelectionActive"),f=rn(),p=t(),g=Ho({el:p,onStart(e,t,n){r.value.selectionDragStart({event:e,node:t,nodes:n})},onDrag(e,t,n){r.value.selectionDrag({event:e,node:t,nodes:n})},onStop(e,t,n){r.value.selectionDragStop({event:e,node:t,nodes:n})}});a((()=>{var e;d.value||null==(e=p.value)||e.focus({preventScroll:!0})}));const m=o((()=>pt(l.value))),y=o((()=>({width:`${m.value.width}px`,height:`${m.value.height}px`,top:`${m.value.y}px`,left:`${m.value.x}px`})));function w(e){r.value.selectionContextMenu({event:e,nodes:l.value})}function b(e){d.value||Uo[e.key]&&f({x:Uo[e.key].x,y:Uo[e.key].y},e.shiftKey)}return(e,t)=>!v(h)&&v(m).width&&v(m).height?(u(),s("div",{key:0,class:k(["vue-flow__nodesselection vue-flow__container",v(c)]),style:O({transform:`translate(${v(i).x}px,${v(i).y}px) scale(${v(i).zoom})`})},[E("div",{ref_key:"el",ref:p,class:k([{dragging:v(g)},"vue-flow__nodesselection-rect"]),style:O(v(y)),tabIndex:v(d)?void 0:-1,onContextmenu:w,onKeydown:b},null,46,Br)],6)):S("",!0)}}),Tr=e({name:"UserSelection",compatConfig:{MODE:3},setup(e){const{userSelectionRect:t}=fl();return(e,n)=>{var o,r,i,a;return u(),s("div",{class:"vue-flow__selection vue-flow__container",style:O({width:`${null==(o=v(t))?void 0:o.width}px`,height:`${null==(r=v(t))?void 0:r.height}px`,transform:`translate(${null==(i=v(t))?void 0:i.x}px, ${null==(a=v(t))?void 0:a.y}px)`})},null,4)}}}),Dr={input:Wt,default:Zt,output:Qt},Vr={default:ur,straight:kr,step:br,smoothstep:yr,simplebezier:hr},Rr=()=>({vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Et.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Ct.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Nt.Bezier,style:{}},connectionMode:St.Loose,connectionStartHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:{edgesChange:ue(),nodesChange:ue(),nodeDoubleClick:ue(),nodeClick:ue(),nodeMouseEnter:ue(),nodeMouseMove:ue(),nodeMouseLeave:ue(),nodeContextMenu:ue(),nodeDragStart:ue(),nodeDrag:ue(),nodeDragStop:ue(),nodesInitialized:ue(),miniMapNodeClick:ue(),miniMapNodeDoubleClick:ue(),miniMapNodeMouseEnter:ue(),miniMapNodeMouseMove:ue(),miniMapNodeMouseLeave:ue(),connect:ue(),connectStart:ue(),connectEnd:ue(),paneReady:ue(),move:ue(),moveStart:ue(),moveEnd:ue(),selectionDragStart:ue(),selectionDrag:ue(),selectionDragStop:ue(),selectionContextMenu:ue(),selectionStart:ue(),selectionEnd:ue(),viewportChangeStart:ue(),viewportChange:ue(),viewportChangeEnd:ue(),paneScroll:ue(),paneClick:ue(),paneContextMenu:ue(),paneMouseEnter:ue(),paneMouseMove:ue(),paneMouseLeave:ue(),edgeContextMenu:ue(),edgeMouseEnter:ue(),edgeMouseMove:ue(),edgeMouseLeave:ue(),edgeDoubleClick:ue(),edgeClick:ue(),edgeUpdateStart:ue(),edgeUpdate:ue(),edgeUpdateEnd:ue(),updateNodeInternals:ue()},applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1},vueFlowVersion:"1.16.2"});function Xr(e){const t=Rr();return e&&Object.keys(e).forEach((n=>{const o=e[n];_t(o)&&(t[n]=o)})),t}function Hr(e){const t=o((()=>e.nodes.map((e=>e.id)))),n=o((()=>e.edges.map((e=>e.id)))),r=o((()=>n=>e.nodes&&!t.value.length?e.nodes.find((e=>e.id===n)):e.nodes[t.value.indexOf(n)])),i=o((()=>t=>e.edges&&!n.value.length?e.edges.find((e=>e.id===t)):e.edges[n.value.indexOf(t)])),a=o((()=>{var t;const n={...Vr,...e.edgeTypes},o=Object.keys(n);return null==(t=e.edges)||t.forEach((e=>e.type&&!o.includes(e.type)&&(n[e.type]=e.type))),n})),l=o((()=>{var t;const n={...Dr,...e.nodeTypes},o=Object.keys(n);return null==(t=e.nodes)||t.forEach((e=>e.type&&!o.includes(e.type)&&(n[e.type]=e.type))),n})),u=o((()=>{const t=e.nodes.filter((e=>!e.hidden));return e.onlyRenderVisibleElements?t&&gt(t,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):t??[]})),s=(t,n,o)=>(n=n??r.value(t.source),o=o??r.value(t.target),n&&o?!t.hidden&&!o.hidden&&!n.hidden:(e.edges=e.edges.filter((e=>e.id!==t.id)),void Ke(t.id))),c=o((()=>e.onlyRenderVisibleElements?e.edges.filter((t=>{const n=r.value(t.source),o=r.value(t.target);return s(t,n,o)&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=ft({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),h=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*h)>0}({sourcePos:n.computedPosition||{x:0,y:0},targetPos:o.computedPosition||{x:0,y:0},sourceWidth:n.dimensions.width,sourceHeight:n.dimensions.height,targetWidth:o.dimensions.width,targetHeight:o.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})})):e.edges.filter((e=>s(e))))),d=o((()=>[...u.value,...c.value])),h=o((()=>e.nodes.filter((e=>e.selected)))),f=o((()=>e.edges.filter((e=>e.selected)))),v=o((()=>[...h.value??[],...f.value??[]])),p=o((()=>u.value.filter((e=>e.initialized))));return{getNode:r,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:l,getEdges:c,getNodes:u,getSelectedElements:v,getSelectedNodes:h,getSelectedEdges:f,getNodesInitialized:p}}function Yr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Fr(){}var jr=.7,qr=1/jr,Ur="\\s*([+-]?\\d+)\\s*",Zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wr=/^#([0-9a-f]{3,8})$/,Gr=new RegExp(`^rgb\\(${Ur},${Ur},${Ur}\\)$`),Qr=new RegExp(`^rgb\\(${Kr},${Kr},${Kr}\\)$`),Jr=new RegExp(`^rgba\\(${Ur},${Ur},${Ur},${Zr}\\)$`),ei=new RegExp(`^rgba\\(${Kr},${Kr},${Kr},${Zr}\\)$`),ti=new RegExp(`^hsl\\(${Zr},${Kr},${Kr}\\)$`),ni=new RegExp(`^hsla\\(${Zr},${Kr},${Kr},${Zr}\\)$`),oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ri(){return this.rgb().formatHex()}function ii(){return this.rgb().formatRgb()}function ai(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Wr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?li(t):3===n?new ci(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ui(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ui(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Gr.exec(e))?new ci(t[1],t[2],t[3],1):(t=Qr.exec(e))?new ci(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Jr.exec(e))?ui(t[1],t[2],t[3],t[4]):(t=ei.exec(e))?ui(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ti.exec(e))?gi(t[1],t[2]/100,t[3]/100,1):(t=ni.exec(e))?gi(t[1],t[2]/100,t[3]/100,t[4]):oi.hasOwnProperty(e)?li(oi[e]):"transparent"===e?new ci(NaN,NaN,NaN,0):null}function li(e){return new ci(e>>16&255,e>>8&255,255&e,1)}function ui(e,t,n,o){return o<=0&&(e=t=n=NaN),new ci(e,t,n,o)}function si(e,t,n,o){return 1===arguments.length?function(e){return e instanceof Fr||(e=ai(e)),e?new ci((e=e.rgb()).r,e.g,e.b,e.opacity):new ci}(e):new ci(e,t,n,o??1)}function ci(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function di(){return`#${pi(this.r)}${pi(this.g)}${pi(this.b)}`}function hi(){const e=fi(this.opacity);return`${1===e?"rgb(":"rgba("}${vi(this.r)}, ${vi(this.g)}, ${vi(this.b)}${1===e?")":`, ${e})`}`}function fi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pi(e){return((e=vi(e))<16?"0":"")+e.toString(16)}function gi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yi(e,t,n,o)}function mi(e){if(e instanceof yi)return new yi(e.h,e.s,e.l,e.opacity);if(e instanceof Fr||(e=ai(e)),!e)return new yi;if(e instanceof yi)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new yi(a,l,u,e.opacity)}function yi(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function wi(e){return(e=(e||0)%360)<0?e+360:e}function bi(e){return Math.max(0,Math.min(1,e||0))}function _i(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Yr(Fr,ai,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ri,formatHex:ri,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return mi(this).formatHsl()},formatRgb:ii,toString:ii}),Yr(ci,si,Lr(Fr,{brighter(e){return e=null==e?qr:Math.pow(qr,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?jr:Math.pow(jr,e),new ci(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ci(vi(this.r),vi(this.g),vi(this.b),fi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:di,formatHex:di,formatHex8:function(){return`#${pi(this.r)}${pi(this.g)}${pi(this.b)}${pi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:hi,toString:hi})),Yr(yi,(function(e,t,n,o){return 1===arguments.length?mi(e):new yi(e,t,n,o??1)}),Lr(Fr,{brighter(e){return e=null==e?qr:Math.pow(qr,e),new yi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?jr:Math.pow(jr,e),new yi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new ci(_i(e>=240?e-240:e+120,r,o),_i(e,r,o),_i(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new yi(wi(this.h),bi(this.s),bi(this.l),fi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fi(this.opacity);return`${1===e?"hsl(":"hsla("}${wi(this.h)}, ${100*bi(this.s)}%, ${100*bi(this.l)}%${1===e?")":`, ${e})`}`}}));const xi=e=>()=>e;function ki(e){return 1==(e=+e)?Ei:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):xi(isNaN(t)?n:t)}}function Ei(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):xi(isNaN(e)?t:e)}const Ni=function e(t){var n=ki(t);function o(e,t){var o=n((e=si(e)).r,(t=si(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=Ei(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Si(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ci=new RegExp(Mi.source,"g");function $i(e,t){var n,o,r,i=Mi.lastIndex=Ci.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=Mi.exec(e))&&(o=Ci.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:Si(n,o)})),i=Ci.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var Pi,zi=180/Math.PI,Ai={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oi(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*zi,skewX:Math.atan(u)*zi,scaleX:a,scaleY:l}}function Bi(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:Si(e,r)},{i:u-2,x:Si(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:Si(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:Si(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:Si(e,n)},{i:l-2,x:Si(t,o)})}else(1!==n||1!==o)&&i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Ii=Bi((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ai:Oi(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ti=Bi((function(e){return null!=e&&(Pi||(Pi=document.createElementNS("http://www.w3.org/2000/svg","g")),Pi.setAttribute("transform",e),e=Pi.transform.baseVal.consolidate())?Oi((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ai}),", ",")",")"),Di=1e-12;function Vi(e){return((e=Math.exp(e))+1/e)/2}const Ri=function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],h=r[2],f=c-l,v=d-u,p=f*f+v*v;if(p<Di)a=Math.log(h/s)/t,i=function(e){return[l+e*f,u+e*v,s*Math.exp(t*e*a)]};else{var g=Math.sqrt(p),m=(h*h-s*s+o*p)/(2*s*n*g),y=(h*h-s*s-o*p)/(2*h*n*g),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,i=function(e){var o=e*a,r=Vi(w),i=s/(n*g)*(r*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*o+w)-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+i*f,u+i*v,s*r/Vi(t*o+w)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var Xi,Hi,Yi=0,Li=0,Fi=0,ji=1e3,qi=0,Ui=0,Zi=0,Ki="object"==typeof performance&&performance.now?performance:Date,Wi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Gi(){return Ui||(Wi(Qi),Ui=Ki.now()+Zi)}function Qi(){Ui=0}function Ji(){this._call=this._time=this._next=null}function ea(e,t,n){var o=new Ji;return o.restart(e,t,n),o}function ta(){Ui=(qi=Ki.now())+Zi,Yi=Li=0;try{!function(){Gi(),++Yi;for(var e,t=Xi;t;)(e=Ui-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Yi}()}finally{Yi=0,function(){for(var e,t,n=Xi,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Xi=t);Hi=e,oa(o)}(),Ui=0}}function na(){var e=Ki.now(),t=e-qi;t>ji&&(Zi-=t,qi=e)}function oa(e){Yi||(Li&&(Li=clearTimeout(Li)),e-Ui>24?(e<1/0&&(Li=setTimeout(ta,e-Ki.now()-Zi)),Fi&&(Fi=clearInterval(Fi))):(Fi||(qi=Ki.now(),Fi=setInterval(na,ji)),Yi=1,Wi(ta)))}function ra(e,t,n){var o=new Ji;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}Ji.prototype=ea.prototype={constructor:Ji,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Gi():+n)+(null==t?0:+t),!this._next&&Hi!==this&&(Hi?Hi._next=this:Xi=this,Hi=this),this._call=e,this._time=n,oa()},stop:function(){this._call&&(this._call=null,this._time=1/0,oa())}};var ia=cn("start","end","cancel","interrupt"),aa=[],la=0,ua=1,sa=2,ca=3,da=4,ha=5,fa=6;function va(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=ua,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var s,c,d,h;if(n.state!==ua)return u();for(s in r)if((h=r[s]).name===n.name){if(h.state===ca)return ra(a);h.state===da?(h.state=fa,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[s]):+s<t&&(h.state=fa,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[s])}if(ra((function(){n.state===ca&&(n.state=da,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=sa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===sa){for(n.state=ca,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(h=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=ha,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);n.state===ha&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=fa,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=ea(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:ia,tween:aa,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:la})}function pa(e,t){var n=ma(e,t);if(n.state>la)throw new Error("too late; already scheduled");return n}function ga(e,t){var n=ma(e,t);if(n.state>ca)throw new Error("too late; already running");return n}function ma(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ya(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>sa&&n.state<ha,n.state=fa,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function wa(e,t){var n,o;return function(){var r=ga(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function ba(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=ga(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function _a(e,t,n){var o=e._id;return e.each((function(){var e=ga(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ma(e,o).value[t]}}function xa(e,t){var n;return("number"==typeof t?Si:t instanceof ai?Ni:(n=ai(t))?(t=n,Ni):$i)(e,t)}function ka(e){return function(){this.removeAttribute(e)}}function Ea(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Na(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Sa(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Ma(e,t,n){var o,r,i;return function(){var a,l,u=n(this);return null==u?void this.removeAttribute(e):(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u))}}function Ca(e,t,n){var o,r,i;return function(){var a,l,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u))}}function $a(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Pa(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function za(e,t){return function(){pa(this,e).delay=+t.apply(this,arguments)}}function Aa(e,t){return t=+t,function(){pa(this,e).delay=t}}function Oa(e,t){return function(){ga(this,e).duration=+t.apply(this,arguments)}}function Ba(e,t){return t=+t,function(){ga(this,e).duration=t}}var Ia=So.prototype.constructor;function Ta(e){return function(){this.style.removeProperty(e)}}var Da=0;function Va(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ra(){return++Da}var Xa=So.prototype;Va.prototype={constructor:Va,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=_n(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),h=0;h<c;++h)(l=s[h])&&(u=e.call(l,l.__data__,h,s))&&("__data__"in l&&(u.__data__=l.__data__),d[h]=u,va(d[h],t,n,h,d,ma(l,n)));return new Va(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=kn(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var h,f=e.call(u,u.__data__,d,s),v=ma(u,n),p=0,g=f.length;p<g;++p)(h=f[p])&&va(h,t,n,p,f,v);i.push(f),a.push(u)}return new Va(i,a,t,n)},selectChild:Xa.selectChild,selectChildren:Xa.selectChildren,filter:function(e){"function"!=typeof e&&(e=Nn(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new Va(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=t[l],c=n[l],d=s.length,h=a[l]=new Array(d),f=0;f<d;++f)(u=s[f]||c[f])&&(h[f]=u);for(;l<o;++l)a[l]=t[l];return new Va(a,this._parents,this._name,this._id)},selection:function(){return new Ia(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Ra(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=ma(a,t);va(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Va(o,this._parents,e,n)},call:Xa.call,nodes:Xa.nodes,node:Xa.node,size:Xa.size,empty:Xa.empty,each:Xa.each,on:function(e,t){var n=this._id;return arguments.length<2?ma(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?pa:ga;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=gn(e),o="transform"===n?Ti:xa;return this.attrTween(e,"function"==typeof t?(n.local?Ca:Ma)(n,o,_a(this,"attr."+e,t)):null==t?(n.local?Ea:ka)(n):(n.local?Sa:Na)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=gn(e);return this.tween(n,(o.local?$a:Pa)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Ii:xa;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=Zn(this,e),a=(this.style.removeProperty(e),Zn(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Ta(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=Zn(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=Zn(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,_a(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=ga(this,e),s=u.on,c=null==u.value[a]?i||(i=Ta(t)):void 0;(s!==n||r!==c)&&(o=(n=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=Zn(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,n??""))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=t??""}}(_a(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=ma(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?wa:ba)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?za:Aa)(t,e)):ma(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Oa:Ba)(t,e)):ma(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ga(this,e).ease=t}}(t,e)):ma(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;ga(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0==--r&&i()}};n.each((function(){var n=ga(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:Xa[Symbol.iterator]};var Ha={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ya(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}So.prototype.interrupt=function(e){return this.each((function(){ya(this,e)}))},So.prototype.transition=function(e){var t,n;e instanceof Va?(t=e._id,e=e._name):(t=Ra(),(n=Ha).time=Gi(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&va(a,e,t,s,l,n||Ya(a,t));return new Va(o,this._parents,e,t)};const La=e=>()=>e;function Fa(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function ja(e,t,n){this.k=e,this.x=t,this.y=n}ja.prototype={constructor:ja,scale:function(e){return 1===e?this:new ja(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ja(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var qa=new ja(1,0,0);function Ua(e){e.stopImmediatePropagation()}function Za(e){e.preventDefault(),e.stopImmediatePropagation()}function Ka(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Wa(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Ga(){return this.__zoom||qa}function Qa(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ja(){return navigator.maxTouchPoints||"ontouchstart"in this}function el(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}ja.prototype;const tl=()=>{},nl={zoomIn:tl,zoomOut:tl,zoomTo:tl,fitView:tl,setCenter:tl,fitBounds:tl,project:e=>e,setTransform:tl,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1},ol=(e,n)=>{const r=e,i=_(r,"nodes"),a=_(r,"d3Zoom"),l=_(r,"d3Selection"),u=_(r,"dimensions"),s=_(r,"translateExtent"),c=_(r,"minZoom"),d=_(r,"maxZoom"),h=_(r,"viewport"),f=_(r,"snapToGrid"),v=_(r,"snapGrid"),p=_(r,"hooks"),g=_(n,"getNodes"),m=t(!1);p.value.nodesInitialized.on((()=>{m.value=!0}));const y=o((()=>!!a.value&&!!l.value&&!!u.value.width&&!!u.value.height&&m.value));function w(e,t){l.value&&a.value&&a.value.scaleBy(rl(l.value,t),e)}function b(e,t,n,o){const{x:r,y:i}=tt({x:-e,y:-t},s.value),u=qa.translate(-r,-i).scale(n);l.value&&a.value&&a.value.transform(rl(l.value,o),u)}return o((()=>y.value?{initialized:!0,zoomIn:e=>{w(1.2,null==e?void 0:e.duration)},zoomOut:e=>{w(1/1.2,null==e?void 0:e.duration)},zoomTo:(e,t)=>{l.value&&a.value&&a.value.scaleTo(rl(l.value,null==t?void 0:t.duration),e)},setTransform:(e,t)=>{b(e.x,e.y,e.zoom,null==t?void 0:t.duration)},getTransform:()=>({x:h.value.x,y:h.value.y,zoom:h.value.zoom}),fitView:(e={padding:.1,includeHiddenNodes:!1,duration:0})=>{if(!i.value.length)return;const t=pt((e.includeHiddenNodes?i.value:g.value).filter((t=>{var n;const o=t.initialized&&t.dimensions.width&&t.dimensions.height;let r=!0;return null!=(n=e.nodes)&&n.length&&(r=e.nodes.includes(t.id)),o&&r}))),{x:n,y:o,zoom:r}=yt(t,u.value.width,u.value.height,e.minZoom??c.value,e.maxZoom??d.value,e.padding??.1,e.offset);b(n,o,r,null==e?void 0:e.duration)},setCenter:(e,t,n)=>{const o=typeof(null==n?void 0:n.zoom)<"u"?n.zoom:d.value;b(u.value.width/2-e*o,u.value.height/2-t*o,o,null==n?void 0:n.duration)},fitBounds:(e,t={padding:.1})=>{const{x:n,y:o,zoom:r}=yt(e,u.value.width,u.value.height,c.value,d.value,t.padding);b(n,o,r,null==t?void 0:t.duration)},project:e=>dt(e,h.value,f.value,v.value)}:nl))};function rl(e,t=0){return e.transition().duration(t)}function il(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(J(t.style)?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(te(r.width)){const e=Number(r.width.replace("px",""));r.width=`${e+n}px`}else r.width+=n;if(o>0)if(te(r.height)){const e=Number(r.height.replace("px",""));r.height=`${e+o}px`}else r.height+=o;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,te(r.width)){const e=Number(r.width.replace("px",""));r.width=`${e+n}px`}else r.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,te(r.height)){const e=Number(r.height.replace("px",""));r.height=`${e+n}px`}else r.height+=n;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),J(t.style)?t.style=e=>({...(0,t.style)(e),...r}):t.style={...t.style,...r}}}}function al(e,t){e.filter((e=>"add"===e.type||"remove"===e.type)).forEach((e=>{if("add"===e.type)-1===t.findIndex((t=>t.id===e.item.id))&&t.push(e.item);else if("remove"===e.type){const n=t.findIndex((t=>t.id===e.id));-1!==n&&t.splice(n,1)}}));const n=t.map((e=>e.id));return t.forEach((o=>{var r,i;const a=e.filter((e=>e.id===o.id));for(const e of a)switch(e.type){case"select":o.selected=e.selected;break;case"position":if(at(o)&&(typeof e.position<"u"&&(o.position=e.position),typeof e.dragging<"u"&&(o.dragging=e.dragging),o.expandParent&&o.parentNode)){const e=t[n.indexOf(o.parentNode)];e&&at(e)&&il(o,e)}break;case"dimensions":if(at(o)){if(typeof e.dimensions<"u"&&(o.dimensions=e.dimensions),typeof e.updateStyle<"u"&&(o.style={...o.style||{},width:`${null==(r=e.dimensions)?void 0:r.width}px`,height:`${null==(i=e.dimensions)?void 0:i.height}px`}),typeof e.resizing<"u"&&(o.resizing=e.resizing),o.expandParent&&o.parentNode){const e=t[n.indexOf(o.parentNode)];e&&at(e)&&(e.initialized?il(o,e):z((()=>{il(o,e)})))}o.initialized||(o.initialized=!0)}}})),t}const ll=(e,t)=>({id:e,type:"select",selected:t}),ul=e=>({item:e,type:"add"}),sl=e=>({id:e,type:"remove"});function cl(e,t){return e.reduce(((e,n)=>{let o=t.includes(n.id);_t(n.selectable)&&!n.selectable&&(o=!1);const r=at(n)?"changedNodes":"changedEdges";return!n.selected&&o?e[r].push(ll(n.id,!0)):n.selected&&!o&&e[r].push(ll(n.id,!1)),e}),{changedNodes:[],changedEdges:[]})}function dl(e,t){let n=!1;const r=ol(e,t);ce((()=>r.value.initialized)).toBe(!0).then((()=>{}));const i=o((()=>e.nodes.map((e=>e.id)))),a=o((()=>e.edges.map((e=>e.id)))),l=t=>{const n=t??i.value??[];e.hooks.updateNodeInternals.trigger(n)},u=t=>e.nodes&&!i.value.length?e.nodes.find((e=>e.id===t)):e.nodes[i.value.indexOf(t)],s=t=>e.edges&&!a.value.length?e.edges.find((e=>e.id===t)):e.edges[a.value.indexOf(t)],c=(t,n)=>{const o=t.map((e=>e.id));let r,i=[];if(e.multiSelectionActive)r=o.map((e=>ll(e,n)));else{const t=cl([...e.nodes,...e.edges],o);r=t.changedNodes,i=t.changedEdges}r.length&&e.hooks.nodesChange.trigger(r),i.length&&e.hooks.edgesChange.trigger(i)},d=(t,n)=>{const o=t.map((e=>e.id));let r,i=[];if(e.multiSelectionActive)r=o.map((e=>ll(e,n)));else{const t=cl([...e.nodes,...e.edges],o);i=t.changedNodes,r=t.changedEdges}i.length&&e.hooks.nodesChange.trigger(i),r.length&&e.hooks.edgesChange.trigger(r)},h=(t,n)=>{const o=t.filter(at),r=t.filter(rt),i=o.map((e=>e.id)),a=r.map((e=>e.id));let{changedNodes:l,changedEdges:u}=cl([...e.nodes,...e.edges],[...i,...a]);e.multiSelectionActive&&(l=i.map((e=>ll(e,n)))),e.multiSelectionActive&&(u=a.map((e=>ll(e,n)))),l.length&&e.hooks.nodesChange.trigger(l),u.length&&e.hooks.edgesChange.trigger(u)},f=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},v=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},p=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},g=async n=>{e.nodeExtent=n;const o=t.getNodes.value.filter((e=>e.initialized)).map((e=>e.id));l(o)},m=t=>{const n=t instanceof Function?t(e.nodes):t;!e.initialized&&!n.length||(e.nodes=xt(n,u,e.nodes))},y=n=>{const o=n instanceof Function?n(e.edges):n;if(!e.initialized&&!o.length)return;const r=e.isValidConnection?o.filter((t=>e.isValidConnection(t,{edges:e.edges,sourceNode:u(t.source),targetNode:u(t.target)}))):o;e.edges=r.reduce(((n,o)=>{const r=u(o.source),i=u(o.target),a=!r||typeof r>"u",l=!i||typeof i>"u";if(a&&Ke((o.source,o.id)),l&&Ke((o.target,o.id)),a||l)return n;const s=t.getEdge.value(o.id);return n.push({...ut(o,Object.assign({},s,e.defaultEdgeOptions)),sourceNode:r,targetNode:i}),n}),[])},w=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;!e.initialized&&!n.length||(m(n.filter(it)),y(n.filter(ot)))},b=e=>{const t=lt(e),n=t?null:u(e.id);return t||n?[t?e:Ge(n),n,t]:[null,null,t]},_=t=>{const n=t instanceof Function?t(e):t,o=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks"],r=n.modelValue||n.nodes||n.edges?[]:void 0;r&&(n.modelValue&&r.push(...n.modelValue),n.nodes&&r.push(...n.nodes),n.edges&&r.push(...n.edges),w(r));const i=()=>{typeof n.maxZoom<"u"&&v(n.maxZoom),typeof n.minZoom<"u"&&f(n.minZoom),typeof n.translateExtent<"u"&&p(n.translateExtent),typeof n.nodeExtent<"u"&&g(n.nodeExtent)};Object.keys(n).forEach((t=>{const r=n[t];!o.includes(t)&&_t(r)&&(e[t]=r)})),e.d3Zoom?i():ce((()=>e.d3Zoom)).not.toBeUndefined().then(i),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{const r=[];t.forEach((e=>{var t,i;const a={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(a.position=e.position,e.parentNode)){const n=u(e.parentNode);a.position={x:a.position.x-((null==(t=null==n?void 0:n.computedPosition)?void 0:t.x)??0),y:a.position.y-((null==(i=null==n?void 0:n.computedPosition)?void 0:i.y)??0)}}r.push(a)})),null!=r&&r.length&&e.hooks.nodesChange.trigger(r)},updateNodeDimensions:t=>{var o;if(!e.vueFlowRef)return;const i=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!i)return;let a;if(null!=(o=e.__experimentalFeatures)&&o.nestedFlow){let e,t=[i],n=i;for(;!e&&n;)n=n.parentElement,e=null==n?void 0:n.classList.contains("vue-flow__transformationpane"),e&&(t=[n,...t]);t.forEach((e=>{const t=window.getComputedStyle(e),{m22:n}=new window.DOMMatrixReadOnly(t.transform);a?a*=n:a=n}))}else{const e=window.getComputedStyle(i),{m22:t}=new window.DOMMatrixReadOnly(e.transform);a=t}const l=t.reduce(((e,t)=>{const n=u(t.id);if(n){const o=Je(t.nodeElement);o.width&&o.height&&(n.dimensions.width!==o.width||n.dimensions.height!==o.height||t.forceUpdate)&&(n.handleBounds.source=ln(".source",t.nodeElement,a),n.handleBounds.target=ln(".target",t.nodeElement,a),n.dimensions=o,n.initialized=!0,e.push({id:n.id,type:"dimensions",dimensions:o}))}return e}),[]);e.fitViewOnInit&&!n&&(ce((()=>r.value.initialized)).toBe(!0).then((()=>{r.value.fitView()})),n=!0),l.length&&e.hooks.nodesChange.trigger(l)},setElements:w,setNodes:m,setEdges:y,addNodes:t=>{const n=xt(t instanceof Function?t(e.nodes):t,u,e.nodes).map(ul);n.length&&e.hooks.nodesChange.trigger(n)},addEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=(e.isValidConnection?n.filter((t=>e.isValidConnection(t,{edges:e.edges,sourceNode:u(t.source),targetNode:u(t.target)}))):n).reduce(((t,n)=>{const o=function(e,t){if(!e.source||!e.target)return Ke(),!1;let n;return n=ot(e)?e:{...e,id:st(e)},n=ut(n),!ct(n,t)&&n}({...n,...e.defaultEdgeOptions},e.edges);if(o){const e=u(o.source),n=u(o.target),r=!e||typeof e>"u",i=!n||typeof n>"u";if(r&&Ke((o.source,o.id)),i&&Ke((o.target,o.id)),i||r)return t;t.push(ul({...o,sourceNode:e,targetNode:n}))}return t}),[]);o.length&&e.hooks.edgesChange.trigger(o)},removeNodes:(t,n=!0)=>{const o=t instanceof Function?t(e.nodes):t,r=[],i=[];o.forEach((t=>{const o="string"==typeof t?u(t):t;if((!_t(o.deletable)||o.deletable)&&(r.push(sl(o.id)),n)){const t=mt([o],e.edges).filter((e=>!_t(e.deletable)||e.deletable));i.push(...t.map((e=>sl(e.id))))}})),i.length&&e.hooks.edgesChange.trigger(i),r.length&&e.hooks.nodesChange.trigger(r)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=[];n.forEach((e=>{const t="string"==typeof e?s(e):e;_t(t.deletable)&&!t.deletable||o.push(sl("string"==typeof e?e:e.id))})),e.hooks.edgesChange.trigger(o)},findNode:u,findEdge:s,updateEdge:(t,n,o=!0)=>function(e,t,n,o,r){if(!t.source||!t.target)return Ke(),!1;const i=o(e.id);if(!i)return Ke(e.id),!1;const{id:a,...l}=e,u={...l,id:r?st(t):a,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(i),1,u),u}(t,n,e.edges,s,o),applyEdgeChanges:t=>al(t,e.edges),applyNodeChanges:t=>al(t,e.nodes),addSelectedElements:e=>{h(e,!0)},addSelectedNodes:e=>{c(e,!0)},addSelectedEdges:e=>{d(e,!0)},setMinZoom:f,setMaxZoom:v,setTranslateExtent:p,setNodeExtent:g,removeSelectedElements:t=>{if(!t||!t.length)return h([],!1);const{changedNodes:n,changedEdges:o}=t.reduce(((e,t)=>{const n=ll(t.id,!1);return at(t)?e.changedNodes.push(n):e.changedEdges.push(n),e}),{changedNodes:[],changedEdges:[]});n.length&&e.hooks.nodesChange.trigger(n),o.length&&e.hooks.edgesChange.trigger(o)},removeSelectedNodes:t=>{if(!t.length)return c(t,!1);const n=t.map((e=>e.id)).map((e=>ll(e,!1)));n.length&&e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{if(!t.length)return d(t,!1);const n=t.map((e=>e.id)).map((e=>ll(e,!1)));n.length&&e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o,r=!1)=>{r?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n,o=null)=>{e.connectionStartHandle?(e.connectionPosition=t,e.connectionStartHandle.result=n,e.connectionStatus=o):Ke()},endConnection:(t,n)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:_,getIntersectingNodes:(t,n=!0,o)=>{const[r,i,a]=b(t);return r?(o||e.nodes).filter((e=>{if(!(a||e.id!==i.id&&e.computedPosition))return!1;const o=Qe(Ge(e),r);return n&&o>0||o>=Number(t.width)*Number(t.height)})):[]},isNodeIntersecting:(e,t,n=!0)=>{const[o]=b(e);if(!o)return!1;const r=Qe(o,t);return n&&r>0||r>=Number(e.width)*Number(e.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:r,d3Selection:i,translateExtent:a}=e;if(!r||!i||!t.x&&!t.y)return;const l=qa.translate(n.x+t.x,n.y+t.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=r.constrain()(l,u,a);r.transform(i,s)},fitView:async(e={padding:.1})=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.fitView(e)},zoomIn:async e=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.zoomIn(e)},zoomOut:async e=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.zoomOut(e)},zoomTo:async(e,t)=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.zoomTo(e,t)},setTransform:async(e,t)=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.setTransform(e,t)},getTransform:()=>r.value.getTransform(),setCenter:async(e,t,n)=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.setCenter(e,t,n)},fitBounds:async(e,t)=>{await ce((()=>r.value.initialized)).toBe(!0),r.value.fitBounds(e,t)},project:e=>r.value.project(e),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map((e=>{const{computedPosition:t,handleBounds:n,selected:o,dimensions:r,isParent:i,resizing:a,dragging:l,initialized:u,...s}=e;return s})),edges:e.edges.map((e=>{const{selected:t,sourceNode:n,targetNode:o,...r}=e;return r})),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:l,$reset:()=>{_(Xr())},$destroy:()=>{}}}let hl=class e{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return e.instance||(e.instance=new e),e.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=Xr(t),o=$(n),r=Hr(o),i=dl(o,r),a={};Object.entries(o.hooks).forEach((([e,t])=>{const n=`on${e.charAt(0).toUpperCase()+e.slice(1)}`;a[n]=t.on}));const l={};Object.entries(o.hooks).forEach((([e,t])=>{l[e]=t.trigger})),i.setState(o);const u={...a,...r,...i,...P(o),emits:l,id:e,$destroy:()=>{this.remove(e)}};return this.set(e,u),u}getId(){return"vue-flow-"+this.currentId++}};const fl=e=>{const t=hl.getInstance(),o=M(),r=null==e?void 0:e.id,i=(null==o?void 0:o.vueFlowId)||r;let a,l=!1;if(o){const e=y($t,null);typeof e<"u"&&null!==e&&(a=e)}if(a||i&&(a=t.get(i)),!a||a&&r&&r!==a.id){const n=r??t.getId();a=t.create(n,e),o&&(l=!0)}else e&&a.setState(e);if(!a)throw new Ze("Store instance not found.","useVueFlow");return o&&(n($t,a),o.vueFlowId=a.id,l&&le((()=>{if(a){const e=t.get(a.id);e?e.$destroy():Ke(a.id)}}))),a};function vl(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const pl=e({name:"Pane",compatConfig:{MODE:3},props:{isSelecting:{type:Boolean}},setup(e){const{id:n,vueFlowRef:r,getNodes:i,getEdges:a,viewport:l,emits:c,userSelectionActive:d,removeSelectedElements:h,panOnDrag:f,userSelectionRect:g,elementsSelectable:m,nodesSelectionActive:y,addSelectedElements:w,getSelectedEdges:b,getSelectedNodes:_,removeNodes:x,removeEdges:E,selectionMode:N,deleteKeyCode:M,multiSelectionKeyCode:C,multiSelectionActive:$}=fl(),P=t(null),z=t(0),O=t(0),B=t(),I=o((()=>m.value&&(e.isSelecting||d.value)));function T(){d.value=!1,g.value=null,z.value=0,O.value=0}function D(e){e.target!==P.value||I.value||(c.paneClick(e),h(),y.value=!1)}function V(e){var t;if(e.target===P.value){if(Array.isArray(f.value)&&null!=(t=f.value)&&t.includes(2))return void e.preventDefault();c.paneContextMenu(e)}}function R(e){e.target===P.value&&c.paneScroll(e)}function X(t){if(B.value=r.value.getBoundingClientRect(),!(I.value&&m&&e.isSelecting&&0===t.button&&t.target===P.value&&B.value))return;const{x:n,y:o}=vl(t,B.value);h(),g.value={width:0,height:0,startX:n,startY:o,x:n,y:o},d.value=!0,c.selectionStart(t)}function H(t){if(!e.isSelecting||!B.value||!g.value)return;if(!I.value)return c.paneMouseMove(t);d.value||(d.value=!0),y.value&&(y.value=!1);const n=vl(t,B.value),o=g.value.startX??0,r=g.value.startY??0,u={...g.value,x:n.x<o?n.x:o,y:n.y<r?n.y:r,width:Math.abs(n.x-o),height:Math.abs(n.y-r)},s=gt(i.value,g.value,l.value,N.value===Et.Partial),h=mt(s,a.value);z.value=s.length,O.value=h.length,g.value=u,w([...s,...h])}function Y(e){I.value&&0===e.button&&(!d.value&&g.value&&e.target===P.value&&D(e),y.value=z.value>0,T(),c.selectionEnd(e))}function L(e){var t;if(!I.value)return c.paneMouseLeave(e);d.value&&(y.value=z.value>0,null==(t=c.selectionEnd)||t.call(c,e)),T()}function F(e){I.value||c.paneMouseEnter(e)}return Lo(M,(e=>{if(!e)return;const t=i.value.reduce(((e,t)=>((!t.selected&&t.parentNode&&e.find((e=>e.id===t.parentNode))||t.selected)&&e.push(t),e)),[]);(t||b.value)&&(b.value.length>0&&E(b.value),t.length>0&&x(t),y.value=!1,h())})),Lo(C,(e=>{$.value=e})),(t,o)=>(u(),s("div",{ref_key:"container",ref:P,key:`pane-${v(n)}`,class:k(["vue-flow__pane vue-flow__container",[{selection:e.isSelecting}]]),onClick:D,onContextmenu:V,onWheel:R,onMouseenter:F,onMousedown:X,onMousemove:H,onMouseup:Y,onMouseleave:L},[p(t.$slots,"default"),v(d)&&v(g)?(u(),A(Tr,{key:0})):S("",!0),v(y)&&v(_).length?(u(),A(Ir,{key:1})):S("",!0)],34))}}),gl={class:"vue-flow__nodes vue-flow__container"},ml=e({name:"Nodes",compatConfig:{MODE:3},setup(e){const n=y(Bt),o=fl(),r=_(o,"nodesDraggable"),i=_(o,"nodesFocusable"),l=_(o,"elementsSelectable"),c=_(o,"nodesConnectable"),d=_(o,"nodes"),p=_(o,"getNodes"),g=_(o,"getNodesInitialized"),m=_(o,"getNodeTypes"),w=_(o,"updateNodeDimensions"),b=_(o,"emits");let x=t();ce((()=>d.value.length>0&&g.value.length===d.value.length)).toBe(!0).then((()=>{z((()=>{b.value.nodesInitialized(g.value)}))})),a((()=>{x.value=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));w.value(t)}))})),I((()=>{var e;return null==(e=x.value)?void 0:e.disconnect()}));const k=e=>typeof e>"u"?r.value:e,E=e=>typeof e>"u"?l.value:e,N=e=>typeof e>"u"?c.value:e,M=e=>typeof e>"u"?i.value:e;function $(e,t){const o=e||"default";let r=t??m.value[o];const i=C();if("string"==typeof r&&i){const e=Object.keys(i.appContext.components);e&&e.includes(o)&&(r=X(o,!1))}if("string"!=typeof r)return r;return(null==n?void 0:n[`node-${o}`])||(Ke(),!1)}return(e,t)=>(u(),s("div",gl,[v(x)?(u(!0),s(h,{key:0},f(v(p),(e=>(u(),A(v(Ko),{id:e.id,key:e.id,"resize-observer":v(x),type:$(e.type,e.template),name:e.type||"default",draggable:k(e.draggable),selectable:E(e.selectable),connectable:N(e.connectable),focusable:M(e.focusable),node:e},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"])))),128)):S("",!0)]))}}),yl=["id","markerWidth","markerHeight","markerUnits","orient"],wl=["stroke","stroke-width","fill"],bl=["stroke","stroke-width"],_l=e({name:"MarkerType",compatConfig:{MODE:3},props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(t,n)=>(u(),s("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===v(Mt).ArrowClosed?(u(),s("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,wl)):S("",!0),e.type===v(Mt).Arrow?(u(),s("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,bl)):S("",!0)],8,yl))}),xl=e({name:"MarkerDefinitions",compatConfig:{MODE:3},setup(e){const t=fl(),n=_(t,"id"),r=_(t,"edges"),i=_(t,"connectionLineOptions"),a=_(t,"defaultMarkerColor"),l=o((()=>{const e=[],t=[],o=o=>{if(o){const r=bt(o,n.value);e.includes(r)||("object"==typeof o?t.push({...o,id:r,color:o.color||a.value}):t.push({id:r,color:a.value,type:o}),e.push(r))}};return[i.value.markerEnd,i.value.markerStart].forEach(o),r.value.reduce(((e,t)=>([t.markerStart,t.markerEnd].forEach(o),e.sort(((e,t)=>e.id.localeCompare(t.id))))),t),t}));return(e,t)=>(u(),s("defs",null,[(u(!0),s(h,null,f(v(l),(e=>(u(),A(_l,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))]))}}),kl={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},El=e({name:"Edges",compatConfig:{MODE:3},setup(e){const t=y(Bt),n=fl(),o=_(n,"connectionStartHandle"),r=_(n,"nodesConnectable"),i=_(n,"edgesUpdatable"),a=_(n,"edgesFocusable"),l=_(n,"elementsSelectable"),d=_(n,"getSelectedNodes"),p=_(n,"findNode"),g=_(n,"getEdges"),m=_(n,"getNodesInitialized"),w=_(n,"getEdgeTypes"),b=_(n,"elevateEdgesOnSelect"),x=_(n,"dimensions"),k=ae((()=>{var e;return null==(e=o.value)?void 0:e.nodeId}),(()=>{var e;return!(null==(e=o.value)||!e.nodeId)&&p.value(o.value.nodeId)})),N=ae((()=>{var e;return null==(e=o.value)?void 0:e.nodeId}),(()=>{var e,t;return!!(k.value&&(typeof k.value.connectable>"u"?r.value:k.value.connectable)&&null!=(e=o.value)&&e.nodeId&&null!=(t=o.value)&&t.type)})),M=ae([()=>g.value.map((e=>e.zIndex)),()=>b.value?[d.value.length]:[0],()=>b.value?m.value.map((e=>e.computedPosition.z)):[]],(()=>function(e,t,n=!1){let o=-1;const r=e.reduce(((e,r)=>{const i=ee(r.zIndex);let a=i?r.zIndex:0;const l=t(r.source),u=t(r.target);return!l||!u||(n&&(a=i?r.zIndex:Math.max(l.computedPosition.z||0,u.computedPosition.z||0)),e[a]?e[a].push(r):e[a]=[r],o=a>o?a:o),e}),{});return Object.entries(Object.keys(r).length?r:{0:[]}).map((([e,t])=>{const n=+e;return{edges:t,level:n,isMaxLevel:n===o}}))}(g.value,p.value,b.value)));I((()=>{null==stop||stop()}));const $=e=>typeof e>"u"?l.value:e,P=e=>typeof e>"u"?i.value:e,z=e=>typeof e>"u"?a.value:e;function B(e,n){const o=e||"default";let r=n??w.value[o];const i=C();if("string"==typeof r&&i){const e=Object.keys(i.appContext.components);e&&e.includes(o)&&(r=X(o,!1))}if(r&&"string"!=typeof r)return r;return(null==t?void 0:t[`edge-${o}`])||(Ke(),!1)}return(e,t)=>v(x).width&&v(x).height?(u(),s(h,{key:0},[(u(!0),s(h,null,f(v(M),(e=>(u(),s("svg",{key:e.level,class:"vue-flow__edges vue-flow__container",style:O(`z-index: ${e.level}`)},[e.isMaxLevel?(u(),A(xl,{key:0})):S("",!0),E("g",null,[(u(!0),s(h,null,f(e.edges,(e=>(u(),A(v(Pr),{id:e.id,key:e.id,edge:e,type:B(e.type,e.template),name:e.type||"default",selectable:$(e.selectable),updatable:P(e.updatable),focusable:z(e.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"])))),128))])],4)))),128)),v(N)&&v(k)?(u(),s("svg",kl,[c(Or,{"source-node":v(k)},null,8,["source-node"])])):S("",!0)],64)):S("",!0)}}),Nl=E("div",{class:"vue-flow__edge-labels"},null,-1),Sl=e({name:"Transform",compatConfig:{MODE:3},setup(e){const{id:t,viewport:n,emits:o,d3Zoom:r,d3Selection:i,dimensions:a,...l}=fl();return ce((()=>r.value&&i.value&&a.value.width>0&&a.value.height>0)).toBeTruthy().then((()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:r,d3Selection:i,dimensions:a,...l})})),(e,o)=>(u(),s("div",{key:`transform-${v(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:O({transform:`translate(${v(n).x}px,${v(n).y}px) scale(${v(n).zoom})`})},[c(El),Nl,c(ml),p(e.$slots,"default")],4))}}),Ml=e({name:"Viewport",compatConfig:{MODE:3},setup(e){const n=fl(),r=_(n,"id"),i=_(n,"minZoom"),l=_(n,"maxZoom"),f=_(n,"defaultViewport"),m=_(n,"translateExtent"),y=_(n,"dimensions"),w=_(n,"zoomActivationKeyCode"),b=_(n,"selectionKeyCode"),E=_(n,"panActivationKeyCode"),N=_(n,"panOnScroll"),S=_(n,"panOnScrollMode"),M=_(n,"panOnScrollSpeed"),C=_(n,"panOnDrag"),$=_(n,"zoomOnDoubleClick"),P=_(n,"zoomOnPinch"),z=_(n,"zoomOnScroll"),A=_(n,"preventScrolling"),O=_(n,"noWheelClassName"),B=_(n,"noPanClassName"),I=_(n,"setState"),T=_(n,"emits"),D=_(n,"connectionStartHandle"),V=_(n,"userSelectionActive"),R=_(n,"paneDragging"),X=t();let H=t(!1),Y=t(!1),L=t(!1),F=t(0);const j=Lo(E.value),q=o((()=>!!D.value)),U=o((()=>!H.value&&C.value&&j.value)),Z=o((()=>!0!==b.value&&H.value||!0===b.value&&!0!==U.value));let K=t({x:0,y:0,zoom:0});function W(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function G(e){return{x:e.x,y:e.y,zoom:e.k}}function Q(){if(!X.value)return;const{width:e,height:t}=Je(X.value);(0===e||0===t)&&Ke(),y.value.width=e||500,y.value.height=t||500}function J(e,t){return e.target.closest(`.${t}`)}return a((()=>{!function(e,t,n={}){const o=n,{window:r=Ce}=o,i=Xe(o,["window"]);let a;const l=Ae((()=>r&&"ResizeObserver"in r)),u=()=>{a&&(a.disconnect(),a=void 0)},s=g((()=>Me(e)),(e=>{u(),l.value&&r&&e&&(a=new ResizeObserver(t),a.observe(e,i))}),{immediate:!0,flush:"post"}),c=()=>{u(),s()};le(c)}(X,Q);$e(We(),"resize",Q)})),a((()=>{const e=X.value,t=e.getBoundingClientRect(),n=function(){var e,t,n,o=Ka,r=Wa,i=el,a=Qa,l=Ja,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Ri,h=cn("start","zoom","end"),f=500,v=150,p=0,g=10;function m(e){e.property("__zoom",Ga).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",S).filter(l).on("touchstart.zoom",M).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new ja(t,e.x,e.y)}function w(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new ja(e.k,o,r)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n,o){e.on("start.zoom",(function(){x(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=x(e,i).event(o),l=r.apply(e,i),u=null==n?b(l):"function"==typeof n?n.apply(e,i):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,h="function"==typeof t?t.apply(e,i):t,f=d(c.invert(u).concat(s/c.k),h.invert(u).concat(s/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=s/t[2];e=new ja(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new k(e,t)}function k(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function E(e,...t){if(o.apply(this,arguments)){var n=x(this,t).event(e),r=this.__zoom,l=Math.max(u[0],Math.min(u[1],r.k*Math.pow(2,a.apply(this,arguments)))),c=Co(e);if(n.wheel)(n.mouse[0][0]!==c[0]||n.mouse[0][1]!==c[1])&&(n.mouse[1]=r.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(r.k===l)return;n.mouse=[c,r.invert(c)],ya(this),n.start()}Za(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),v),n.zoom("mouse",i(w(y(r,l),n.mouse[0],n.mouse[1]),n.extent,s))}}function N(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,a=x(this,t,!0).event(e),l=Mo(e.view).on("mousemove.zoom",(function(e){if(Za(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>p}a.event(e).zoom("mouse",i(w(a.that.__zoom,a.mouse[0]=Co(e,r),a.mouse[1]),a.extent,s))}),!0).on("mouseup.zoom",(function(e){l.on("mousemove.zoom mouseup.zoom",null),Bo(e.view,a.moved),Za(e),a.event(e).end()}),!0),u=Co(e,r),c=e.clientX,d=e.clientY;Oo(e.view),Ua(e),a.mouse=[u,this.__zoom.invert(u)],ya(this),a.start()}}function S(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Co(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),d=i(w(y(n,u),a,l),r.apply(this,t),s);Za(e),c>0?Mo(this).transition().duration(c).call(_,d,a,e):Mo(this).call(m.transform,d,a,e)}}function M(n,...r){if(o.apply(this,arguments)){var i,a,l,u,s=n.touches,c=s.length,d=x(this,r,n.changedTouches.length===c).event(n);for(Ua(n),a=0;a<c;++a)u=[u=Co(l=s[a],this),this.__zoom.invert(u),l.identifier],d.touch0?!d.touch1&&d.touch0[2]!==u[2]&&(d.touch1=u,d.taps=0):(d.touch0=u,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),f)),ya(this),d.start())}}function C(e,...t){if(this.__zooming){var n,o,r,a,l=x(this,t).event(e),u=e.changedTouches,c=u.length;for(Za(e),n=0;n<c;++n)r=Co(o=u[n],this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=r:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=r);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],h=l.touch0[1],f=l.touch1[0],v=l.touch1[1],p=(p=f[0]-d[0])*p+(p=f[1]-d[1])*p,g=(g=v[0]-h[0])*g+(g=v[1]-h[1])*g;o=y(o,Math.sqrt(p/g)),r=[(d[0]+f[0])/2,(d[1]+f[1])/2],a=[(h[0]+v[0])/2,(h[1]+v[1])/2]}else{if(!l.touch0)return;r=l.touch0[0],a=l.touch0[1]}l.zoom("touch",i(w(o,r,a),l.extent,s))}}function $(e,...o){if(this.__zooming){var r,i,a=x(this,o).event(e),l=e.changedTouches,u=l.length;for(Ua(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),r=0;r<u;++r)i=l[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Co(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<g)){var s=Mo(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",Ga),e!==r?_(e,t,n,o):r.interrupt().each((function(){x(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,o){m.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},m.scaleTo=function(e,t,n,o){m.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?b(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return i(w(y(o,u),a,l),e,s)}),n,o)},m.translateBy=function(e,t,n,o){m.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)}),null,o)},m.translateTo=function(e,t,n,o,a){m.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?b(e):"function"==typeof o?o.apply(this,arguments):o;return i(qa.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},k.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Mo(this.that).datum();h.call(e,this.that,new Fa(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:La(+e),m):a},m.filter=function(e){return arguments.length?(o="function"==typeof e?e:La(!!e),m):o},m.touchable=function(e){return arguments.length?(l="function"==typeof e?e:La(!!e),m):l},m.extent=function(e){return arguments.length?(r="function"==typeof e?e:La([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):r},m.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],m):[u[0],u[1]]},m.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}().scaleExtent([i.value,l.value]).translateExtent(m.value),o=Mo(e).call(n),r=o.on("wheel.zoom"),a=qa.translate(f.value.x??0,f.value.y??0).scale(et(f.value.zoom??1,i.value,l.value)),u=[[0,0],[t.width,t.height]],s=n.constrain()(a,u,m.value);n.transform(o,s),I.value({d3Zoom:n,d3Selection:o,d3ZoomHandler:r,viewport:{x:s.x,y:s.y,zoom:s.k},viewportRef:e}),Lo(b.value,(e=>{H.value=e}));const c=Lo(w.value);x((()=>{H.value&&V.value&&!Y.value?n.on("zoom",null):!H.value&&!V.value&&n.on("zoom",(e=>{I.value({viewport:{x:e.transform.x,y:e.transform.y,zoom:e.transform.k}});const t=G(e.transform);L.value=W(C.value,F.value??0),T.value.viewportChange(t),T.value.move({event:e,flowTransform:t})}))})),n.on("start",(e=>{var t;if(!e.sourceEvent)return null;F.value=e.sourceEvent.button,Y.value=!0;const n=G(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&I.value({paneDragging:!0}),K.value=n,T.value.viewportChangeStart(n),T.value.moveStart({event:e,flowTransform:n})})),n.on("end",(e=>{if(!e.sourceEvent)return null;if(Y.value=!1,I.value({paneDragging:!1}),W(C.value,F.value??0)&&!L.value&&T.value.paneContextMenu(e.sourceEvent),L.value=!1,function(e,t){return e.x!==t.x&&!isNaN(t.x)||e.y!==t.y&&!isNaN(t.y)||e.zoom!==t.k&&!isNaN(t.k)}(K.value,e.transform)){const t=G(e.transform);K.value=t,T.value.viewportChangeEnd(t),T.value.moveEnd({event:e,flowTransform:t})}})),x((()=>{!N.value||c.value||V.value?typeof r<"u"&&o.on("wheel",(e=>{if(!A.value||J(e,O.value))return null;e.preventDefault()})).on("wheel.zoom",r):o.on("wheel",(e=>{if(J(e,O.value))return!1;e.preventDefault(),e.stopImmediatePropagation();const t=o.property("__zoom").k||1;if(e.ctrlKey&&P.value){const r=Co(e),i=t*2**(-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10);return void n.scaleTo(o,i,r)}const r=1===e.deltaMode?20:1,i=S.value===Ct.Vertical?0:e.deltaX*r,a=S.value===Ct.Horizontal?0:e.deltaY*r;n.translateBy(o,-i/t*M.value,-a/t*M.value)})).on("wheel.zoom",null)})),n.filter((e=>{var t,n;const o=c.value||z.value,r=P.value&&e.ctrlKey;if(1===e.button&&"mousedown"===e.type&&(null!=(t=e.target)&&t.closest(".vue-flow__node")||null!=(n=e.target)&&n.closest(".vue-flow__edge")))return!0;if(!C.value&&!o&&!N.value&&!$.value&&!P.value||V.value||!$.value&&"dblclick"===e.type||J(e,O.value)&&"wheel"===e.type||J(e,B.value)&&"wheel"!==e.type||!P.value&&e.ctrlKey&&"wheel"===e.type||!o&&!N.value&&!r&&"wheel"===e.type||!C.value&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(C.value)&&!C.value.includes(e.button)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const i=Array.isArray(C.value)&&C.value.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&i}))})),(e,t)=>(u(),s(h,null,[(u(),s("div",{ref_key:"viewportEl",ref:X,key:`viewport-${v(r)}`,class:"vue-flow__viewport vue-flow__container"},[c(pl,{"is-selecting":v(Z),class:k({connecting:v(q),dragging:v(R),draggable:!!v(C)})},{default:d((()=>[c(Sl,null,{default:d((()=>[p(e.$slots,"zoom-pane")])),_:3})])),_:3},8,["is-selecting","class"])])),p(e.$slots,"default")],64))}}),Cl=["id"],$l=["id"],Pl=["id"],zl=e({compatConfig:{MODE:3},__name:"A11yDescriptions",setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=fl(),r={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(e,i)=>(u(),s(h,null,[E("div",{id:`${v(Fo)}-${v(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+N(v(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Cl),E("div",{id:`${v(jo)}-${v(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,$l),v(n)?S("",!0):(u(),s("div",{key:0,id:`${v("vue-flow__aria-live")}-${v(t)}`,"aria-live":"assertive","aria-atomic":"true",style:r},N(v(o)),9,Pl))],64))}}),Al=e({name:"VueFlow",compatConfig:{MODE:3},props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","update:modelValue","update:nodes","update:edges"],setup(e,{expose:o,emit:r}){const y=e,x=qe(y,"modelValue",r),k=qe(y,"nodes",r),E=qe(y,"edges",r),{vueFlowRef:N,id:S,hooks:M,getNodeTypes:C,getEdgeTypes:$,$reset:P,...A}=fl(y),O=function(e,t,n){const o=w();return o.run((()=>{[()=>{o.run((()=>{let t,o,r=!(!n.nodes.value.length&&!n.edges.value.length);t=Se([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setElements(e),o||r||!e.length?null==o||o.resume():r=!0)})),o=Se([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,o])=>{var r;null!=(r=e.modelValue)&&r.value&&Array.isArray(e.modelValue.value)&&(null==t||t.pause(),e.modelValue.value=[...n,...o],z((()=>{null==t||t.resume()})))}),{immediate:r}),b((()=>{null==t||t.stop(),null==o||o.stop()}))}))},()=>{o.run((()=>{let t,o,r=!!n.nodes.value.length;t=Se([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setNodes(e),o||r||!e.length?null==o||o.resume():r=!0)})),o=Se([n.nodes,()=>n.nodes.value.length],(([n])=>{var o;null!=(o=e.nodes)&&o.value&&Array.isArray(e.nodes.value)&&(null==t||t.pause(),e.nodes.value=[...n],z((()=>{null==t||t.resume()})))}),{immediate:r}),b((()=>{null==t||t.stop(),null==o||o.stop()}))}))},()=>{o.run((()=>{let t,o,r=!!n.edges.value.length;t=Se([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setEdges(e),o||r||!e.length?null==o||o.resume():r=!0)})),o=Se([n.edges,()=>n.edges.value.length],(([n])=>{var o;null!=(o=e.edges)&&o.value&&Array.isArray(e.edges.value)&&(null==t||t.pause(),e.edges.value=[...n],z((()=>{null==t||t.resume()})))}),{immediate:r}),b((()=>{null==t||t.stop(),null==o||o.stop()}))}))},()=>{o.run((()=>{g((()=>t.minZoom),(()=>{t.minZoom&&_t(t.minZoom)&&n.setMinZoom(t.minZoom)}))}))},()=>{o.run((()=>{g((()=>t.maxZoom),(()=>{t.maxZoom&&_t(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}))}))},()=>{o.run((()=>{g((()=>t.translateExtent),(()=>{t.translateExtent&&_t(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)}))}))},()=>{o.run((()=>{g((()=>t.nodeExtent),(()=>{t.nodeExtent&&_t(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)}))}))},()=>{o.run((()=>{g((()=>t.applyDefault),(()=>{_t(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)})),g(n.applyDefault,((e,t,o)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),o((()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)}))}),{immediate:!0})}))},()=>{o.run((()=>{const e=async e=>{let o=e;J(t.autoConnect)&&(o=await t.autoConnect(e)),!1!==o&&n.addEdges([o])};g((()=>t.autoConnect),(()=>{_t(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)})),g(n.autoConnect,((t,o,r)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),r((()=>{n.hooks.value.connect.off(e)}))}),{immediate:!0})}))},()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach((r=>{if(!e.includes(r)){const e=_(t,r),i=n[r];o.run((()=>{g(e,(e=>{_t(e)&&(i.value=e)}),{flush:"pre"})}))}}))}].forEach((e=>e()))})),()=>o.stop()}({modelValue:x,nodes:k,edges:E},y,{vueFlowRef:N,id:S,hooks:M,getNodeTypes:C,getEdgeTypes:$,$reset:P,...A}),B=t();return i((()=>{O()})),a((()=>{N.value=B.value})),function(e,t){m((()=>{for(const[n,o]of Object.entries(t.value)){const t=t=>{e(n,t)};o.on(t),le((()=>{o.off(t)}))}}))}(r,M),n(Bt,l()),o({vueFlowRef:N,id:S,hooks:M,getNodeTypes:C,getEdgeTypes:$,$reset:P,...A}),(e,t)=>(u(),s("div",{ref_key:"el",ref:B,class:"vue-flow"},[c(Ml,null,{nodes:d((()=>[(u(!0),s(h,null,f(Object.keys(v(C)),(t=>p(e.$slots,`node-${t}`))),256))])),edges:d((()=>[(u(!0),s(h,null,f(Object.keys(v($)),(t=>p(e.$slots,`edge-${t}`))),256))])),"connection-name":d((()=>[p(e.$slots,"connection-line")])),"zoom-pane":d((()=>[p(e.$slots,"zoom-pane")])),default:d((()=>[p(e.$slots,"default")])),_:3}),c(zl)],512))}}),Ol=["x","y","width","height"],Bl=["stroke","stroke-width","d"],Il=["cx","cy","r","fill"],Tl={key:2,height:"100",width:"100"},Dl=["fill"],Vl=["x","y","fill"],Rl=e({name:"Background",props:{variant:{default:()=>"dots"},gap:{default:10},size:{default:.4},patternColor:null,bgColor:null,height:{default:100},width:{default:100},x:{default:0},y:{default:0}},setup(e){const t={dots:"#81818a",lines:"#eee"},{id:n,viewport:r}=fl(),i=o((()=>{const t=e.gap&&e.gap*r.value.zoom;return{scaledGap:t,xOffset:t&&r.value.x%t,yOffset:t&&r.value.y%t,size:e.size*r.value.zoom}})),a=`pattern-${n}`,l=o((()=>e.patternColor||t[e.variant||"dots"])),c=o((()=>`M${i.value.scaledGap/2} 0 V${i.value.scaledGap} M0 ${i.value.scaledGap/2} H${i.value.scaledGap}`));return(t,n)=>(u(),s("svg",{class:"vue-flow__background",style:O({height:`${e.height>100?100:e.height}%`,width:`${e.width>100?100:e.width}%`})},[p(t.$slots,"pattern-container",{id:a},(()=>[E("pattern",{id:a,x:i.value.xOffset,y:i.value.yOffset,width:i.value.scaledGap,height:i.value.scaledGap,patternUnits:"userSpaceOnUse"},[p(t.$slots,"pattern",{},(()=>["lines"===e.variant?(u(),s("path",{key:0,stroke:v(l),"stroke-width":e.size,d:v(c)},null,8,Bl)):"dots"===e.variant?(u(),s("circle",{key:1,cx:i.value.size,cy:i.value.size,r:i.value.size,fill:v(l)},null,8,Il)):S("",!0),e.bgColor?(u(),s("svg",Tl,[E("rect",{width:"100%",height:"100%",fill:e.bgColor},null,8,Dl)])):S("",!0)]))],8,Ol)])),E("rect",{x:e.x,y:e.y,width:"100%",height:"100%",fill:`url(#${a})`},null,8,Vl),p(t.$slots,"default",{id:a})],4))}}),Xl=e({__name:"Panel",props:{position:null},setup(e){const t=e,{userSelectionActive:n}=fl(),r=o((()=>`${t.position}`.split("-")));return(e,t)=>(u(),s("div",{class:k(["vue-flow__panel",v(r)]),style:O({pointerEvents:v(n)?"none":"all"})},[p(e.$slots,"default")],6))}});var Hl=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Hl||{});const Yl=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Ll={class:"vue-flow__controls-button"};const Fl=Yl({name:"ControlButton"},[["render",function(e,t,n,o,r,i){return u(),s("button",Ll,[p(e.$slots,"default")])}]]),jl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ql=[E("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1)];const Ul={render:function(e,t){return u(),s("svg",jl,ql)}},Zl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Kl=[E("path",{d:"M0 0h32v4.2H0z"},null,-1)];const Wl={render:function(e,t){return u(),s("svg",Zl,Kl)}},Gl={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ql=[E("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1)];const Jl={render:function(e,t){return u(),s("svg",Gl,Ql)}},eu={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},tu=[E("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1)];const nu={render:function(e,t){return u(),s("svg",eu,tu)}},ou={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ru=[E("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1)];const iu={render:function(e,t){return u(),s("svg",ou,ru)}},au=e({name:"Controls",props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:null,position:{default:()=>"bottom-left"}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const n=fl(),r=_(n,"nodesDraggable"),i=_(n,"nodesConnectable"),a=_(n,"elementsSelectable"),l=_(n,"setInteractive"),f=_(n,"zoomIn"),g=_(n,"zoomOut"),m=_(n,"fitView"),y=o((()=>r.value&&i.value&&a.value)),w=()=>{f.value(),t("zoomIn")},b=()=>{g.value(),t("zoomOut")},x=()=>{m.value(e.fitViewParams),t("fitView")},k=()=>{l.value(!y.value),t("interactionChange",!y.value)};return(t,n)=>(u(),A(v(Xl),{class:"vue-flow__controls",position:e.position},{default:d((()=>[p(t.$slots,"top"),e.showZoom?(u(),s(h,{key:0},[p(t.$slots,"control-zoom-in",{},(()=>[c(Fl,{class:"vue-flow__controls-zoomin",onClick:w},{default:d((()=>[p(t.$slots,"icon-zoom-in",{},(()=>[(u(),A(D(v(Ul))))]))])),_:3})])),p(t.$slots,"control-zoom-out",{},(()=>[c(Fl,{class:"vue-flow__controls-zoomout",onClick:b},{default:d((()=>[p(t.$slots,"icon-zoom-out",{},(()=>[(u(),A(D(v(Wl))))]))])),_:3})]))],64)):S("",!0),e.showFitView?p(t.$slots,"control-fit-view",{key:1},(()=>[c(Fl,{class:"vue-flow__controls-fitview",onClick:x},{default:d((()=>[p(t.$slots,"icon-fit-view",{},(()=>[(u(),A(D(v(Jl))))]))])),_:3})])):S("",!0),e.showInteractive?p(t.$slots,"control-interactive",{key:2},(()=>[e.showInteractive?(u(),A(Fl,{key:0,class:"vue-flow__controls-interactive",onClick:k},{default:d((()=>[v(y)?p(t.$slots,"icon-unlock",{key:0},(()=>[(u(),A(D(v(iu))))])):S("",!0),v(y)?S("",!0):p(t.$slots,"icon-lock",{key:1},(()=>[(u(),A(D(v(nu))))]))])),_:3})):S("",!0)])):S("",!0),p(t.$slots,"default")])),_:3},8,["position"]))}});var lu={value:()=>{}};function uu(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new su(o)}function su(e){this._=e}function cu(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function du(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=lu,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}su.prototype=uu.prototype={constructor:su,on:function(e,t){var n,o=this._,r=function(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",o=e.indexOf(".");if(o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}(e+"",o),i=-1,a=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(n=(e=r[i]).type)o[n]=du(o[n],e.name,t);else if(null==t)for(n in o)o[n]=du(o[n],e.name,null);return this}for(;++i<a;)if((n=(e=r[i]).type)&&(n=cu(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new su(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var hu="http://www.w3.org/1999/xhtml";const fu={svg:"http://www.w3.org/2000/svg",xhtml:hu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vu(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),fu.hasOwnProperty(t)?{space:fu[t],local:e}:e}function pu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hu&&t.documentElement.namespaceURI===hu?t.createElement(e):t.createElementNS(n,e)}}function gu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function mu(e){var t=vu(e);return(t.local?gu:pu)(t)}function yu(){}function wu(e){return null==e?yu:function(){return this.querySelector(e)}}function bu(){return[]}function _u(e){return null==e?bu:function(){return this.querySelectorAll(e)}}function xu(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function ku(e){return function(){return this.matches(e)}}function Eu(e){return function(t){return t.matches(e)}}var Nu=Array.prototype.find;function Su(){return this.firstElementChild}var Mu=Array.prototype.filter;function Cu(){return Array.from(this.children)}function $u(e){return new Array(e.length)}function Pu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function zu(e,t,n,o,r,i){for(var a,l=0,u=t.length,s=i.length;l<s;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new Pu(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function Au(e,t,n,o,r,i,a){var l,u,s,c=new Map,d=t.length,h=i.length,f=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(f[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<h;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):n[l]=new Pu(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(f[l])===u&&(r[l]=u)}function Ou(e){return e.__data__}function Bu(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Iu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tu(e){return function(){this.removeAttribute(e)}}function Du(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vu(e,t){return function(){this.setAttribute(e,t)}}function Ru(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xu(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Hu(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Yu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lu(e){return function(){this.style.removeProperty(e)}}function Fu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ju(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function qu(e,t){return e.style.getPropertyValue(t)||Yu(e).getComputedStyle(e,null).getPropertyValue(t)}function Uu(e){return function(){delete this[e]}}function Zu(e,t){return function(){this[e]=t}}function Ku(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Wu(e){return e.trim().split(/^|\s+/)}function Gu(e){return e.classList||new Qu(e)}function Qu(e){this._node=e,this._names=Wu(e.getAttribute("class")||"")}function Ju(e,t){for(var n=Gu(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function es(e,t){for(var n=Gu(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function ts(e){return function(){Ju(this,e)}}function ns(e){return function(){es(this,e)}}function os(e,t){return function(){(t.apply(this,arguments)?Ju:es)(this,e)}}function rs(){this.textContent=""}function is(e){return function(){this.textContent=e}}function as(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ls(){this.innerHTML=""}function us(e){return function(){this.innerHTML=e}}function ss(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function cs(){this.nextSibling&&this.parentNode.appendChild(this)}function ds(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hs(){return null}function fs(){var e=this.parentNode;e&&e.removeChild(this)}function vs(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ps(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gs(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function ms(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function ys(e,t,n){var o=Yu(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function ws(e,t){return function(){return ys(this,e,t)}}function bs(e,t){return function(){return ys(this,e,t.apply(this,arguments))}}Pu.prototype={constructor:Pu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Qu.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var _s=[null];function xs(e,t){this._groups=e,this._parents=t}function ks(){return new xs([[document.documentElement]],_s)}function Es(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ns(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ss(){}xs.prototype=ks.prototype={constructor:xs,select:function(e){"function"!=typeof e&&(e=wu(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new xs(o,this._parents)},selectAll:function(e){e="function"==typeof e?xu(e):_u(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new xs(o,r)},selectChild:function(e){return this.select(null==e?Su:function(e){return function(){return Nu.call(this.children,e)}}("function"==typeof e?e:Eu(e)))},selectChildren:function(e){return this.selectAll(null==e?Cu:function(e){return function(){return Mu.call(this.children,e)}}("function"==typeof e?e:Eu(e)))},filter:function(e){"function"!=typeof e&&(e=ku(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new xs(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Ou);var n=t?Au:zu,o=this._parents,r=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var i=r.length,a=new Array(i),l=new Array(i),u=new Array(i),s=0;s<i;++s){var c=o[s],d=r[s],h=d.length,f=Bu(e.call(c,c&&c.__data__,s,o)),v=f.length,p=l[s]=new Array(v),g=a[s]=new Array(v);n(c,d,p,g,u[s]=new Array(h),f,t);for(var m,y,w=0,b=0;w<v;++w)if(m=p[w]){for(w>=b&&(b=w+1);!(y=g[b])&&++b<v;);m._next=y||null}}return(a=new xs(a,o))._enter=l,a._exit=u,a},enter:function(){return new xs(this._enter||this._groups.map($u),this._parents)},exit:function(){return new xs(this._exit||this._groups.map($u),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&((r=t(r))&&(r=r.selection())),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=n[u],d=o[u],h=c.length,f=l[u]=new Array(h),v=0;v<h;++v)(s=c[v]||d[v])&&(f[v]=s);for(;u<r;++u)l[u]=n[u];return new xs(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Iu);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new xs(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=vu(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?Du:Tu:"function"==typeof t?n.local?Hu:Xu:n.local?Ru:Vu)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Lu:"function"==typeof t?ju:Fu)(e,t,null==n?"":n)):qu(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Uu:"function"==typeof t?Ku:Zu)(e,t)):this.node()[e]},classed:function(e,t){var n=Wu(e+"");if(arguments.length<2){for(var o=Gu(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?os:t?ts:ns)(n,t))},text:function(e){return arguments.length?this.each(null==e?rs:("function"==typeof e?as:is)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ls:("function"==typeof e?ss:us)(e)):this.node().innerHTML},raise:function(){return this.each(cs)},lower:function(){return this.each(ds)},append:function(e){var t="function"==typeof e?e:mu(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:mu(e),o=null==t?hs:"function"==typeof t?t:wu(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(fs)},clone:function(e){return this.select(e?ps:vs)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?ms:gs,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?bs:ws)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};var Ms=.7,Cs=1/Ms,$s="\\s*([+-]?\\d+)\\s*",Ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",As=/^#([0-9a-f]{3,8})$/,Os=new RegExp(`^rgb\\(${$s},${$s},${$s}\\)$`),Bs=new RegExp(`^rgb\\(${zs},${zs},${zs}\\)$`),Is=new RegExp(`^rgba\\(${$s},${$s},${$s},${Ps}\\)$`),Ts=new RegExp(`^rgba\\(${zs},${zs},${zs},${Ps}\\)$`),Ds=new RegExp(`^hsl\\(${Ps},${zs},${zs}\\)$`),Vs=new RegExp(`^hsla\\(${Ps},${zs},${zs},${Ps}\\)$`),Rs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xs(){return this.rgb().formatHex()}function Hs(){return this.rgb().formatRgb()}function Ys(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=As.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Ls(t):3===n?new qs(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Fs(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Fs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Os.exec(e))?new qs(t[1],t[2],t[3],1):(t=Bs.exec(e))?new qs(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Is.exec(e))?Fs(t[1],t[2],t[3],t[4]):(t=Ts.exec(e))?Fs(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ds.exec(e))?Qs(t[1],t[2]/100,t[3]/100,1):(t=Vs.exec(e))?Qs(t[1],t[2]/100,t[3]/100,t[4]):Rs.hasOwnProperty(e)?Ls(Rs[e]):"transparent"===e?new qs(NaN,NaN,NaN,0):null}function Ls(e){return new qs(e>>16&255,e>>8&255,255&e,1)}function Fs(e,t,n,o){return o<=0&&(e=t=n=NaN),new qs(e,t,n,o)}function js(e,t,n,o){return 1===arguments.length?function(e){return e instanceof Ss||(e=Ys(e)),e?new qs((e=e.rgb()).r,e.g,e.b,e.opacity):new qs}(e):new qs(e,t,n,null==o?1:o)}function qs(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function Us(){return`#${Gs(this.r)}${Gs(this.g)}${Gs(this.b)}`}function Zs(){const e=Ks(this.opacity);return`${1===e?"rgb(":"rgba("}${Ws(this.r)}, ${Ws(this.g)}, ${Ws(this.b)}${1===e?")":`, ${e})`}`}function Ks(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ws(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gs(e){return((e=Ws(e))<16?"0":"")+e.toString(16)}function Qs(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ec(e,t,n,o)}function Js(e){if(e instanceof ec)return new ec(e.h,e.s,e.l,e.opacity);if(e instanceof Ss||(e=Ys(e)),!e)return new ec;if(e instanceof ec)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new ec(a,l,u,e.opacity)}function ec(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function tc(e){return(e=(e||0)%360)<0?e+360:e}function nc(e){return Math.max(0,Math.min(1,e||0))}function oc(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Es(Ss,Ys,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xs,formatHex:Xs,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Js(this).formatHsl()},formatRgb:Hs,toString:Hs}),Es(qs,js,Ns(Ss,{brighter(e){return e=null==e?Cs:Math.pow(Cs,e),new qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ms:Math.pow(Ms,e),new qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qs(Ws(this.r),Ws(this.g),Ws(this.b),Ks(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Us,formatHex:Us,formatHex8:function(){return`#${Gs(this.r)}${Gs(this.g)}${Gs(this.b)}${Gs(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Zs,toString:Zs})),Es(ec,(function(e,t,n,o){return 1===arguments.length?Js(e):new ec(e,t,n,null==o?1:o)}),Ns(Ss,{brighter(e){return e=null==e?Cs:Math.pow(Cs,e),new ec(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ms:Math.pow(Ms,e),new ec(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new qs(oc(e>=240?e-240:e+120,r,o),oc(e,r,o),oc(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new ec(tc(this.h),nc(this.s),nc(this.l),Ks(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ks(this.opacity);return`${1===e?"hsl(":"hsla("}${tc(this.h)}, ${100*nc(this.s)}%, ${100*nc(this.l)}%${1===e?")":`, ${e})`}`}}));const rc=e=>()=>e;function ic(e){return 1==(e=+e)?ac:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):rc(isNaN(t)?n:t)}}function ac(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):rc(isNaN(e)?t:e)}const lc=function e(t){var n=ic(t);function o(e,t){var o=n((e=js(e)).r,(t=js(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=ac(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function uc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var sc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cc=new RegExp(sc.source,"g");function dc(e,t){var n,o,r,i=sc.lastIndex=cc.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=sc.exec(e))&&(o=cc.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:uc(n,o)})),i=cc.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var hc,fc=180/Math.PI,vc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pc(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*fc,skewX:Math.atan(u)*fc,scaleX:a,scaleY:l}}function gc(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:uc(e,r)},{i:u-2,x:uc(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:uc(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:uc(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:uc(e,n)},{i:l-2,x:uc(t,o)})}else(1!==n||1!==o)&&i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var mc=gc((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vc:pc(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),yc=gc((function(e){return null!=e&&(hc||(hc=document.createElementNS("http://www.w3.org/2000/svg","g")),hc.setAttribute("transform",e),e=hc.transform.baseVal.consolidate())?pc((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):vc}),", ",")",")"),wc=1e-12;function bc(e){return((e=Math.exp(e))+1/e)/2}!function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],h=r[2],f=c-l,v=d-u,p=f*f+v*v;if(p<wc)a=Math.log(h/s)/t,i=function(e){return[l+e*f,u+e*v,s*Math.exp(t*e*a)]};else{var g=Math.sqrt(p),m=(h*h-s*s+o*p)/(2*s*n*g),y=(h*h-s*s-o*p)/(2*h*n*g),w=Math.log(Math.sqrt(m*m+1)-m),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/t,i=function(e){var o,r=e*a,i=bc(w),c=s/(n*g)*(i*(o=t*r+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+c*f,u+c*v,s*i/bc(t*r+w)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var _c,xc,kc=0,Ec=0,Nc=0,Sc=1e3,Mc=0,Cc=0,$c=0,Pc="object"==typeof performance&&performance.now?performance:Date,zc="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ac(){return Cc||(zc(Oc),Cc=Pc.now()+$c)}function Oc(){Cc=0}function Bc(){this._call=this._time=this._next=null}function Ic(e,t,n){var o=new Bc;return o.restart(e,t,n),o}function Tc(){Cc=(Mc=Pc.now())+$c,kc=Ec=0;try{!function(){Ac(),++kc;for(var e,t=_c;t;)(e=Cc-t._time)>=0&&t._call.call(void 0,e),t=t._next;--kc}()}finally{kc=0,function(){for(var e,t,n=_c,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:_c=t);xc=e,Vc(o)}(),Cc=0}}function Dc(){var e=Pc.now(),t=e-Mc;t>Sc&&($c-=t,Mc=e)}function Vc(e){kc||(Ec&&(Ec=clearTimeout(Ec)),e-Cc>24?(e<1/0&&(Ec=setTimeout(Tc,e-Pc.now()-$c)),Nc&&(Nc=clearInterval(Nc))):(Nc||(Mc=Pc.now(),Nc=setInterval(Dc,Sc)),kc=1,zc(Tc)))}function Rc(e,t,n){var o=new Bc;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}Bc.prototype=Ic.prototype={constructor:Bc,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ac():+n)+(null==t?0:+t),!this._next&&xc!==this&&(xc?xc._next=this:_c=this,xc=this),this._call=e,this._time=n,Vc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vc())}};var Xc=uu("start","end","cancel","interrupt"),Hc=[],Yc=0,Lc=1,Fc=2,jc=3,qc=4,Uc=5,Zc=6;function Kc(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=Lc,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var s,c,d,h;if(n.state!==Lc)return u();for(s in r)if((h=r[s]).name===n.name){if(h.state===jc)return Rc(a);h.state===qc?(h.state=Zc,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[s]):+s<t&&(h.state=Zc,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[s])}if(Rc((function(){n.state===jc&&(n.state=qc,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=Fc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fc){for(n.state=jc,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(h=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=h);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=Uc,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);n.state===Uc&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=Zc,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=Ic(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:Xc,tween:Hc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Yc})}function Wc(e,t){var n=Qc(e,t);if(n.state>Yc)throw new Error("too late; already scheduled");return n}function Gc(e,t){var n=Qc(e,t);if(n.state>jc)throw new Error("too late; already running");return n}function Qc(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jc(e,t){var n,o;return function(){var r=Gc(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function ed(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=Gc(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function td(e,t,n){var o=e._id;return e.each((function(){var e=Gc(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Qc(e,o).value[t]}}function nd(e,t){var n;return("number"==typeof t?uc:t instanceof Ys?lc:(n=Ys(t))?(t=n,lc):dc)(e,t)}function od(e){return function(){this.removeAttribute(e)}}function rd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function id(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function ad(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function ld(e,t,n){var o,r,i;return function(){var a,l,u=n(this);return null==u?void this.removeAttribute(e):(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u))}}function ud(e,t,n){var o,r,i;return function(){var a,l,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u))}}function sd(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function cd(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function dd(e,t){return function(){Wc(this,e).delay=+t.apply(this,arguments)}}function hd(e,t){return t=+t,function(){Wc(this,e).delay=t}}function fd(e,t){return function(){Gc(this,e).duration=+t.apply(this,arguments)}}function vd(e,t){return t=+t,function(){Gc(this,e).duration=t}}var pd=ks.prototype.constructor;function gd(e){return function(){this.style.removeProperty(e)}}var md=0;function yd(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function wd(){return++md}var bd=ks.prototype;yd.prototype={constructor:yd,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=wu(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),h=0;h<c;++h)(l=s[h])&&(u=e.call(l,l.__data__,h,s))&&("__data__"in l&&(u.__data__=l.__data__),d[h]=u,Kc(d[h],t,n,h,d,Qc(l,n)));return new yd(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=_u(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var h,f=e.call(u,u.__data__,d,s),v=Qc(u,n),p=0,g=f.length;p<g;++p)(h=f[p])&&Kc(h,t,n,p,f,v);i.push(f),a.push(u)}return new yd(i,a,t,n)},selectChild:bd.selectChild,selectChildren:bd.selectChildren,filter:function(e){"function"!=typeof e&&(e=ku(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new yd(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=t[l],c=n[l],d=s.length,h=a[l]=new Array(d),f=0;f<d;++f)(u=s[f]||c[f])&&(h[f]=u);for(;l<o;++l)a[l]=t[l];return new yd(a,this._parents,this._name,this._id)},selection:function(){return new pd(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=wd(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=Qc(a,t);Kc(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yd(o,this._parents,e,n)},call:bd.call,nodes:bd.nodes,node:bd.node,size:bd.size,empty:bd.empty,each:bd.each,on:function(e,t){var n=this._id;return arguments.length<2?Qc(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Wc:Gc;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=vu(e),o="transform"===n?yc:nd;return this.attrTween(e,"function"==typeof t?(n.local?ud:ld)(n,o,td(this,"attr."+e,t)):null==t?(n.local?rd:od)(n):(n.local?ad:id)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=vu(e);return this.tween(n,(o.local?sd:cd)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?mc:nd;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=qu(this,e),a=(this.style.removeProperty(e),qu(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,gd(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=qu(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=qu(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,td(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=Gc(this,e),s=u.on,c=null==u.value[a]?i||(i=gd(t)):void 0;(s!==n||r!==c)&&(o=(n=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=qu(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(td(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=Qc(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?Jc:ed)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?dd:hd)(t,e)):Qc(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?fd:vd)(t,e)):Qc(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Gc(this,e).ease=t}}(t,e)):Qc(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Gc(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0==--r&&i()}};n.each((function(){var n=Gc(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:bd[Symbol.iterator]};var _d={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function xd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function kd(e,t,n){this.k=e,this.x=t,this.y=n}ks.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>Fc&&n.state<Uc,n.state=Zc,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}(this,e)}))},ks.prototype.transition=function(e){var t,n;e instanceof yd?(t=e._id,e=e._name):(t=wd(),(n=_d).time=Ac(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&Kc(a,e,t,s,l,n||xd(a,t));return new yd(o,this._parents,e,t)},kd.prototype={constructor:kd,scale:function(e){return 1===e?this:new kd(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new kd(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},kd.prototype;const Ed=Symbol("MiniMapSlots");e({name:"MiniMapNode",props:["id","position","dimensions","strokeWidth","strokeColor","borderRadius","color","shapeRendering","type","selected","dragging"],emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{attrs:t,emit:n}){const o=y(Ed);return()=>{var i;const a=null!=(i=t.style)?i:{},l=o[`node-${e.type}`];return l?l(e):r("rect",{id:e.id,class:["vue-flow__minimap-node",t.class].join(" "),style:a,x:e.position.x,y:e.position.y,rx:e.borderRadius,ry:e.borderRadius,width:e.dimensions.width,height:e.dimensions.height,fill:e.color||a.background||a.backgroundColor,stroke:e.strokeColor,strokeWidth:e.strokeWidth,shapeRendering:e.shapeRendering,onClick:e=>n("click",e),onDblClick:e=>n("dblclick",e),onMouseenter:e=>n("mouseenter",e),onMousemove:e=>n("mousemove",e),onMouseleave:e=>n("mouseleave",e)})}}});const Nd={class:"container"},Sd=(e=>(U("data-v-9f27f201"),e=e(),Z(),e))((()=>E("a",{href:"https://vueflow.dev/",target:"_blank"},"Vue Flow官方文档",-1))),Md={for:"ishidden"},Cd=e({__name:"FLowAble",setup(e){const n=[{id:"1",type:"input",label:"Node 1",position:{x:250,y:5}},{id:"2",label:"Node 2",position:{x:100,y:100}},{id:"3",label:"Node 3",position:{x:400,y:100}},{id:"4",label:"Node 4",position:{x:400,y:200}},{id:"e1-2",source:"1",target:"2",animated:!0},{id:"e1-3",source:"1",target:"3"}];let o=t(n);const r=t(!1);let{onPaneReady:i,onNodeDragStop:a,onConnect:l,addEdges:h,setTransform:f,toObject:p,nodes:m,edges:y}=fl();g(r,(()=>{m.value.forEach((e=>e.hidden=r.value)),y.value.forEach((e=>e.hidden=r.value))})),i((({fitView:e})=>{e()})),a((e=>{})),l((e=>h([e])));const w=()=>{m.value.forEach((e=>{e.position={x:400*Math.random(),y:400*Math.random()}}))},b=()=>{q.info(JSON.stringify(p()))},_=()=>{o.value=n,f({x:0,y:0,zoom:1})},x=()=>m.value.forEach((e=>e.class="node-light"===e.class?"node-dark":"node-light"));return(e,t)=>{const n=X("el-col"),i=X("el-row"),a=X("el-divider"),l=X("el-button");return u(),s("div",Nd,[c(i,{gutter:24},{default:d((()=>[c(n,{xs:24,sm:24,md:24,lg:24,xl:24},{default:d((()=>[L(" 相关文档： "),Sd])),_:1})])),_:1}),c(a,{"content-position":"left"},{default:d((()=>[L("Vue Flow")])),_:1}),c(i,{class:"mb-4"},{default:d((()=>[c(l,{type:"primary",onClick:_},{default:d((()=>[L("重置")])),_:1}),c(l,{type:"primary",onClick:w},{default:d((()=>[L("修改属性")])),_:1}),c(l,{type:"primary",onClick:x},{default:d((()=>[L("修改样式")])),_:1}),c(l,{type:"primary",onClick:b},{default:d((()=>[L("查看属性")])),_:1})])),_:1}),c(v(Al),{"fit-view-on-init":"",class:"my-flow",modelValue:v(o),"onUpdate:modelValue":t[1]||(t[1]=e=>H(o)?o.value=e:o=e)},{default:d((()=>[c(v(Rl)),c(v(Xl),{position:v(Hl).TopRight},{default:d((()=>[E("div",null,[E("label",Md,[L(" hidden "),F(E("input",{id:"ishidden","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),type:"checkbox"},null,512),[[j,r.value]])])])])),_:1},8,["position"]),c(v(au))])),_:1},8,["modelValue"])])}}}),$d=K(Cd,[["__scopeId","data-v-9f27f201"]]);export{$d as default};
